{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Foxconn Travel Reimbursement </title>
    <link href="https://fonts.googleapis.com/css?family=Poppins:400,600&display=swap" rel="stylesheet">
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css'>
    <link rel="stylesheet" href="{% static 'travel/style.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" />
    <link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/sweetalert2@7.12.15/dist/sweetalert2.min.css'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/emojionearea/3.4.2/emojionearea.css" />
    <link rel="stylesheet" href="{% static 'office_app/css/chat.css' %}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-mentions-input@1.6.0/jquery.mentionsInput.min.css">

</head>

<body onload="disableSubmit();">
<!-- partial:index.partial.html -->

<!--PEN HEADER-->
<header class="header">
    <h1 class="header__title">Foxconn Travel Reimbursement</h1>
</header>


{% if show_chat and form_is_being_shown_to_approver %}
    <div class="container chat-container">
        <div class="row">
            <div class="chat-block col-md-3">
                <div class="card card-primary text-secondary">
                    <div class="card-header p-2" id="accordion">
                        <i id="chat-badge" class="fas fa-comment pl-2"></i> Chat
                        <div class="btn-group float-right pr-2">
                            <a type="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
                                <i id="toggle_icon" class="fas fa-arrow-down"></i>
                            </a>
                        </div>
                    </div>
                    <div class="card-collapse collapse show" id="collapseOne">
                        <div class="card-header text-center text-info p-1">Chat for TR Form: {{ form_id }}</div>
                        <div id="chat-body" class="card-body card-body-chat">
                            <ul class="chat" id="chat_list"></ul>
                        </div>
                        <div class="card-footer p-2">
                            <div class="input-group" style="flex-wrap: nowrap">
                                <textarea id="chat-input" class="mention" placeholder="Type your message here..." ></textarea>
                                <i class="btn fas fa-level-down-alt text-primary" id="chat-scroll" title="Auto scroll on new message"></i>
                                {#                                <span class="input-group-btn ml-1">#}
                                {#                                <i class="btn fas fa-level-down-alt text-primary" id="chat-scroll" title="Auto scroll on new message"></i>#}
                                {#                                <button class="btn btn-primary btn-sm" id="chat-send">Send</button>#}
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

{% endif %}

<!--PEN CONTENT     -->
<div class="content">
    <!--content inner-->
    <div class="content__inner">
        <div class="container overflow-hidden">
            <!--multisteps-form-->
            <div class="multisteps-form scaleIn">
                <!--menu bar-->
                <nav class="navbar navbar-expand-lg navbar-light bg-light mb-3 rounded">
                    <a class="h7">Welcome, {{ request.session.full_name }}</a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse justify-content-end" id="navbarNavDropdown">
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a href="{% url 'travel_home' %}" class="nav-link">Home</a>
                            </li>
                            <li class="nav-item">
                                <a href="{% url 'smart_office_dashboard' %}" class="nav-link">Smart Office</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button"
                                   aria-haspopup="true" aria-expanded="false">Travel Application Menu</a>
                                <div class="dropdown-menu">

                                    <a href="{% url 'travel_application' %}" class="dropdown-item">Create New Application</a>
                                    <div class="dropdown-divider"></div>
                                    <a href="{% url 'submitted_forms' %}" class="dropdown-item">View My Applications</a>
                                    <div class="dropdown-divider"></div>
                                    <a href="{% url 'travel_list' %}" class="dropdown-item">Approve Applications</a>
                                </div>
                            </li>
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button"
                                   aria-haspopup="true" aria-expanded="false">Travel Reimbursement Menu</a>
                                <div class="dropdown-menu">
                                    <a href="{% url 'my_travel_rem' %}" class="dropdown-item">View My TR Applications</a>
                                    <div class="dropdown-divider"></div>
                                    <a href="{% url 'travel_rem_list' %}" class="dropdown-item">Approve TR Applications</a>
                                </div>
                            </li>
                            <li class="nav-item">
                                <a href="{% url 'logout' %}" class="nav-link">Log Out</a>
                            </li>
                        </ul>
                    </div>
                </nav>
                <div class="row">
                    <div class="col-12 col-lg-8 ml-auto mr-auto mb-4 mt-4">
                        <div class="multisteps-form__progress">
                            <button class="multisteps-form__progress-btn js-active" type="button" title="travel_info">
                                Travel Info
                            </button>
                            <button class="multisteps-form__progress-btn" type="button" title="expense">Expense</button>
                            {% if travel_adv_exists and request.session.department == 'Supporting - Accounting' or travel_adv_exists and request.session.department == 'Supporting - Cost Management' %}
                                <button class="multisteps-form__progress-btn" type="button" title="expenditure" >SAP Data</button>
                            {% endif %}
                            <button class="multisteps-form__progress-btn" type="button" title="summary">Summary</button>

                            <button class="multisteps-form__progress-btn" type="button" title="approval">Approval
                            </button>
                        </div>
                    </div>
                </div>

                <!--form panels-->
                <div class="row">
                    <div class="col-12 col-lg-12 m-auto">
                        <form id="re_form" class="multisteps-form__form" enctype="multipart/form-data" method="post">
                            {% csrf_token %}
                        <input hidden readonly name="ta_total" id="ta_total" value="{{ travel_app.estimatedExpense }}">
                            <input id="number_of_mileage_weeks" name="number_of_mileage_weeks" hidden readonly>
                            <!--Travel Info form panel-->
                            <div class="multisteps-form__panel shadow p-4 rounded bg-white js-active"
                                 data-animation="scaleIn">
                                {% if form_is_declined %}
                                    {% if user_is_creator %}
                                        <button class="btn btn-outline-primary form-control" id="work_from_declined_form_button" type="button" onclick="work_from_declined_form()">Edit and Re-Submit Form</button>
                                    {% else %}
                                        <b><h2 style="color:darkred">THIS FORM HAS BEEN DECLINED</h2></b>
                                    {% endif %}
                                {% endif %}
                                <h3 class="multisteps-form__title">Travel Information</h3>
                                <div class="multisteps-form__content">
                                    <!--first row-->
                                    <div class="form-row mt-4" data-animation="scaleIn">
                                        <div class="col-12 col-sm-4 mt-4 mt-sm-0">
                                            <label for="reimbursement_form_id" class="control-label"> Travel
                                                Reimbursement Form ID : </label>
                                            <input class="multisteps-form__input form-control" type="text"
                                                   name="reimbursement_form_id" id="reimbursement_form_id"
                                                   placeholder="Reimbursement Form ID"
                                                   value="{{ travel_app.formID }}" readonly/>
                                        </div>


                                        <div class="col-12 col-sm-4 mt-4 mt-sm-0">
                                            <label for="application_form_id" class="control-label"> Travel Application
                                                Form ID </label>
                                            <input class="multisteps-form__input form-control" type="text"
                                                   name="application_form_id" id="application_form_id"
                                                   placeholder=" Application Form ID"
                                                   value="{{ travel_app.formID }}" readonly/>
                                        </div>

                                        <div class="col-12 col-sm-4 mt-4 mt-sm-0">
                                            <label for="employee_name" class="control-label"> Employee Name: </label>
                                            <input class="multisteps-form__input form-control" id="employee_name"
                                                   name="employee_name" type="text" placeholder="Employee Name"
                                                   value="{{ travel_app.employee.firstName }} {{ travel_app.employee.lastName }}"
                                                   readonly/>
                                        </div>
                                    </div>

                                    <div class="form-row mt-4" data-animation="scaleIn">
                                        <div class="col-12 col-sm-4">
                                            <label for="company" class="control-label"> Business Group: </label>
                                            <input class="multisteps-form__input form-control" id="business_group"
                                                   value="{{ travel_app.businessGroup }}" name="business_group"
                                                   readonly>
                                        </div>

                                        <div class="col-12 col-sm-4">
                                            <label for="company" class="control-label"> Business Unit: </label>
                                            <input class="multisteps-form__input form-control" id="profit_center"
                                                   value="{{ business_unit }}" name="profit_center" readonly>
                                        </div>

                                        <div class="col-12 col-sm-4">
                                            <label for="company" class="control-label"> Department: </label>
                                            <input class="multisteps-form__input form-control" id="department"
                                                   name="department" value="{{ user_dept }}" readonly>
                                        </div>
                                    </div>


                                    <!--second row-->

                                    <div class="form-row mt-4" data-animation="scaleIn">
                                        <div class="col-12 col-sm-4">
                                            <label for="cost_description" class="control-label"> Cost Center Description
                                                : </label>
                                            <input class="multisteps-form__input form-control" id="cost_description"
                                                   name="cost_description" type="text"
                                                   value="{{ cost_center_desc }}"
                                                   placeholder="Cost Center Description" readonly/>
                                        </div>
                                    </div>


                                    <div class="form-row mt-4" data-animation="scaleIn">
                                        <div class="col-12 col-sm-12">
                                            <label for="mileage" class="control-label">Mileage Rate: ($0.575) </label>
                                        </div>
                                        <table class="table" id="mileage_information">
                                            <thead>
                                            <tr>
                                                <th></th>
                                                <th>WEEK START DATE</th>
                                                <th>WEEK END DATE</th>
                                                <th>MILEAGE</th>
                                                <th>SUBTOTAL</th>
                                                <th>VIEW FORM</th>
                                            </tr>
                                            </thead>
                                            <tbody id="tableadd">
                                            {% if mileage_weeks == None %}
                                                <tr>
                                                    <td colspan="1"><input id="row_checkbox_mileage_unsaved_0" type="checkbox"></td>
                                                    <td><input type="date" class="form-control" id="week_begin_unsaved_0" name="week_begin"
                                                               onfocusout="set_week('week_begin_unsaved_0', 'week_end_unsaved_0', 'date', '')">
                                                    </td>
                                                    <td><input type="date" class="form-control" id="week_end_unsaved_0" name="week_end"
                                                               placeholder="To" readonly></td>
                                                    <td colspan="1"><input type="text" width="48"
                                                                           class="form-control subtotal" id="weekly_mileage_unsaved_0" name="weekly_mileage"
                                                                           data-toggle="modal"
                                                                           placeholder="Mileage"
                                                                           data-target="#Travel_Modal_unsaved_0" readonly></td>
                                                    <td><input type="text" class="form-control subtotal" id="subtotal_unsaved_0" name="subtotal"
                                                               placeholder="subtotal" data-toggle="modal"
                                                               data-target="#Travel_Modal_unsaved_0" readonly></td>
                                                    <td>
                                                        <input type="button" class="btn btn-outline-primary form-control"
                                                               value="Edit" id="view"
                                                               data-toggle="modal" data-target="#Travel_Modal_unsaved_0">
                                                    </td>
                                                </tr>
                                            {% else %}
                                                {% for week in mileage_weeks %}
                                                    <tr>
                                                        <td colspan="1"><input type="checkbox" id="row_checkbox_mileage_saved_{{ week.0.pk }}"></td>
                                                        <td><input type="date" class="form-control" id="week_begin_saved_{{ week.0.pk }}" name="week_begin" value="{{week.0.startDate|date:"Y-m-d"}}"
                                                                   onfocusout="set_week('week_begin_saved_{{ week.0.pk }}', 'week_end_saved_{{ week.0.pk }}', 'date', '')">
                                                        </td>
                                                        <td><input type="date" class="form-control" id="week_end_saved_{{ week.0.pk }}" name="week_end"
                                                                   placeholder="To" value="{{ week.0.endDate|date:"Y-m-d"}}" readonly></td>
                                                        <td colspan="1"><input type="text" width="48"
                                                                               class="form-control subtotal" id="weekly_mileage_saved_{{ week.0.pk }}" name="weekly_mileage"
                                                                               data-toggle="modal"
                                                                               data-target="#Travel_Modal_saved_{{ week.0.pk }}" readonly></td>
                                                        <td><input type="text" class="form-control subtotal" id="subtotal_saved_{{ week.0.pk }}" name="subtotal"
                                                                   placeholder="subtotal" data-toggle="modal"
                                                                   data-target="#Travel_Modal_saved_{{ week.0.pk }}" readonly></td>
                                                        <td>
                                                            <input type="button" class="btn btn-outline-primary form-control"
                                                                   value="Edit" id="view"
                                                                   data-toggle="modal" data-target="#Travel_Modal_saved_{{ week.0.pk }}">
                                                        </td>
                                                    </tr>
                                                {% endfor %}
                                            {% endif %}

                                            </tbody>
                                            <tfoot>
                                            <tr>
                                                <td>
                                                    <span class="input-group-text" id="basic-addon1">Total $:</span>

                                                </td>
                                                <td {% if user_is_creator == False and request.session.department != 'Supporting - Accounting' %}colspan="5" {% else %}colspan="2"{% endif %}>
                                                    <input class="multisteps-form__input form-control" id="total"
                                                           name="total" type="text" readonly/>
                                                </td>

                                                <td colspan="1" {% if user_is_creator == False and request.session.department != 'Supporting - Accounting' %}style="display: none" {% endif %}>
                                                    <div name="gl_account_label" class="input-group-text" id="basic-addon1">
                                                        GL Account :
                                                        {% if forms_DailyMileages.1.mileage.glAccount != None %}
                                                            {{ forms_DailyMileages.1.mileage.glAccount.glCode }}
                                                        {% else %}
                                                            {% for account in gl_accounts %}
                                                                {% if gl_accounts.0 == account %}
                                                                    {{ account.glCode }}
                                                                {% endif %}
                                                            {% endfor %}
                                                        {% endif %}</div>

                                                </td>
                                                <td colspan="3" {% if user_is_creator == False and request.session.department != 'Supporting - Accounting' %}style="display: none"{% endif %}>
                                                    <select class="multisteps-form__input form-control" id="gl_account"
                                                            name="gl_account" onchange="update_gl()">
                                                        {% for account in gl_accounts %}
                                                            <option value="{{ account.glCode }}"
                                                                    {% if account == forms_DailyMileages.1.mileage.glAccount %}selected{% endif %}>{{ account.glDescription }}</option>
                                                        {% endfor %}
                                                    </select>
                                                </td>
                                            </tr>
                                            </tfoot>
                                        </table>
                                    </div>


                                    <div class="form-row mt-4" data-animation="scaleIn">
                                        <div class="col-12 col-sm-12">
                                            <a class="btn btn-outline-danger" id="delete_week" onclick="deleteRow('tableadd')">Delete
                                                Week</a>
                                            <a class="btn btn-outline-success" id="addnew">Add New
                                                Week</a>

                                        </div>

                                    </div>


                                    <!--Next Button-->
                                    <div class="button-row d-flex mt-12">
                                        <button class="btn btn-primary ml-auto js-btn-next" type="button" title="Next">
                                            Next
                                        </button>
                                    </div>

                                    <!-- Save Button -->
                                    <div class="button-row d-flex mt-4 col-12">
                                        <input class="btn btn-outline-info btn-lg btn-block" name="submit_button"
                                               type="submit"
                                               title="Save" value="Save" onclick="return check_weeks(false);" {% if form_is_being_shown_to_approver %} hidden {% endif %}>
                                    </div>

                                    <!-- this input field tells the form which submit button was used to submit the form-->
                                    <input hidden readonly name="submit_button" id="submit_button">

                                </div>
                            </div>


                            <!--Expense panel-->

                            <div class="multisteps-form__panel shadow p-4 rounded bg-white" data-animation="scaleIn">
                                <h3 class="multisteps-form__title"> Expense</h3>
                                <div class="multisteps-form__content">
                                    <div class="form-row mt-4" data-animation="scaleIn">

                                        <div class="card col-12" style="margin-bottom: 50px">
                                            <h5 class="card-header" style="background: #2b5797; color: #ffffff">
                                                Personal Expense
                                            </h5>
                                            <div class="card-body ">
                                                <h5 class="card-title">Meal</h5>
                                                <h5>
                                                    <a class="btn btn-outline-danger float-md-right" id="delete_week_meal"
                                                       onclick="deleteRow('tableadd_expense_meal')">Delete Week</a>
                                                    <a class="btn btn-outline-success float-none"
                                                       id="addnew_meal">Add New Week</a>
                                                </h5>

                                                <table class="table" id="expense_meal_table">
                                                    <thead>
                                                    <tr>
                                                        <th></th>
                                                        <th>WEEK START DATE</th>
                                                        <th>WEEK END DATE</th>
                                                        <th>SUBTOTAL</th>
                                                        <th>VIEW</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody id="tableadd_expense_meal">
                                                    {% if p_meal_weeks == None %}
                                                        <tr>
                                                            <td colspan="1"><input type="checkbox" id="row_checkbox_personal_meal_unsaved_0"></td>
                                                            <td><input type="date" class="form-control"
                                                                       name="meal_week_start" id="meal_week_start_unsaved_0" title="0"
                                                                       onfocusout="set_week('meal_week_start_unsaved_0', 'meal_week_end_unsaved_0', 'personal_meal_date', 'personal_meal_perdiem_date')"
                                                            ></td>
                                                            <td><input type="date" class="form-control"
                                                                       name="meal_week_end"
                                                                       id="meal_week_end_unsaved_0" readonly></td>
                                                            <td><input type="text" class="form-control subtotal"
                                                                       name="meal_week_subtotal"
                                                                       id="meal_week_subtotal_unsaved_0" placeholder="Subtotal"
                                                                       data-toggle="modal"
                                                                       data-target="#Meal_Expense_Modal_unsaved_0" readonly></td>
                                                            <td colspan="1"><input type="button" width="48"
                                                                                   class="form-control btn btn-outline-primary"
                                                                                   name="view" value="Edit"
                                                                                   id="view" data-toggle="modal"
                                                                                   data-target="#Meal_Expense_Modal_unsaved_0"></td>
                                                        </tr>
                                                    {% else %}
                                                        {% for week in p_meal_weeks %}
                                                            <tr>
                                                                <td colspan="1"><input type="checkbox" id="row_checkbox_personal_meal_saved_{{ week.pk }}"></td>
                                                                <td><input type="date" class="form-control" title="{{ week.pk }}"
                                                                           name="meal_week_start" id="meal_week_start_saved_{{ week.pk }}"
                                                                           value="{{ week.startDate|date:"Y-m-d" }}"
                                                                           onfocusout="set_week('meal_week_start_saved_{{ week.pk }}', 'meal_week_end_saved_{{ week.pk }}', 'personal_meal_date', 'personal_meal_perdiem_date')"
                                                                ></td>
                                                                <td><input type="date" class="form-control"
                                                                           name="meal_week_end"
                                                                           id="meal_week_end_saved_{{ week.pk }}" value="{{ week.endDate|date:"Y-m-d" }}" readonly></td>
                                                                <td><input type="text" class="form-control subtotal"
                                                                           name="meal_week_subtotal"
                                                                           id="meal_week_subtotal_saved_{{ week.pk }}" placeholder="Subtotal"
                                                                           data-toggle="modal"
                                                                           data-target="#Meal_Expense_Modal_saved_{{ week.pk }}" readonly></td>
                                                                <td colspan="1"><input type="button" width="48"
                                                                                       class="form-control btn btn-outline-primary"
                                                                                       name="view" value="Edit"
                                                                                       id="view" data-toggle="modal"
                                                                                       data-target="#Meal_Expense_Modal_saved_{{ week.pk }}"></td>
                                                            </tr>
                                                        {% endfor %}
                                                    {% endif %}
                                                    </tbody>
                                                    <tfoot {% if user_is_creator == False and request.session.department != 'Supporting - Accounting' %}style="display: none"{% endif %}>
                                                    <tr>
                                                        <td colspan="1">
                                                            <div name="gl_account_label_p_meal" class="input-group-text" id="basic-addon1">
                                                                GL Account :
                                                                {% if gls_chosen != None %}
                                                                    {{ gls_chosen.Section1.glAccount.glCode }}
                                                                {% else %}
                                                                    {% for account in gl_accounts %}
                                                                        {% if gl_accounts.0 == account %}
                                                                            {{ account.glCode }}
                                                                        {% endif %}
                                                                    {% endfor %}
                                                                {% endif %}</div>

                                                        </td>
                                                        <td colspan="3">
                                                            <select class="multisteps-form__input form-control" id="gl_account_p_meal"
                                                                    name="gl_account_p_meal" onchange="update_gl()">
                                                                {% for account in gl_accounts %}
                                                                    <option value="{{ account.glCode }}"
                                                                            {% if account == gls_chosen.Section1.glAccount %}selected{% endif %}>{{ account.glDescription }}</option>
                                                                {% endfor %}
                                                            </select>
                                                        </td>
                                                    </tr>
                                                    </tfoot>

                                                </table>
                                            </div>



                                            <div class="card-body ">
                                                <h5 class="card-title">Hotel</h5>
                                                <h5>
                                                    <a class="btn btn-outline-danger float-md-right"
                                                       onclick="deleteRow('tableadd_expense_hotel')" id="delete_week_hotel">Delete Week
                                                        (Hotel)</a>
                                                    <a class="btn btn-outline-success float-none"
                                                       id="addnew_hotel">Add New Week (Hotel)
                                                    </a>
                                                </h5>


                                                <table class="table" id="hotel_expense_table">
                                                    <thead>
                                                    <tr>
                                                        <th></th>
                                                        <th>WEEK START DATE</th>
                                                        <th>WEEK END DATE</th>
                                                        <th>SUBTOTAL</th>
                                                        <th>VIEW</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody id="tableadd_expense_hotel">
                                                    {% if hotel_weeks == None %}
                                                        <tr>
                                                            <td colspan="1"><input type="checkbox" id="row_checkbox_hotel_unsaved_0"></td>
                                                            <td><input type="date" class="form-control"
                                                                       name="hotel_week_start" id="hotel_week_start_unsaved_0"
                                                                       onfocusout="set_week('hotel_week_start_unsaved_0', 'hotel_week_end_unsaved_0', 'hotel_date', '')"
                                                            ></td>
                                                            <td><input type="date" class="form-control"
                                                                       name="hotel_week_end"
                                                                       id="hotel_week_end_unsaved_0" readonly></td>
                                                            <td><input type="text" class="form-control subtotal"
                                                                       name="hotel_week_subtotal"
                                                                       id="hotel_week_subtotal_unsaved_0" placeholder="Subtotal"
                                                                       data-toggle="modal"
                                                                       data-target="#Hotel_Expense_Modal_unsaved_0" readonly></td>
                                                            <td colspan="1"><input type="button" width="48"
                                                                                   class="form-control btn btn-outline-primary"
                                                                                   name="view" value="Edit"
                                                                                   id="view" data-toggle="modal"
                                                                                   data-target="#Hotel_Expense_Modal_unsaved_0"></td>
                                                        </tr>
                                                    {% else %}
                                                        {% for week in hotel_weeks %}
                                                            <tr>
                                                                <td colspan="1"><input type="checkbox" id="row_checkbox_hotel_saved_{{ week.pk }}"></td>
                                                                <td><input type="date" class="form-control"
                                                                           name="hotel_week_start"
                                                                           id="hotel_week_start_saved_{{ week.pk }}" value="{{ week.startDate|date:"Y-m-d" }}"
                                                                           onfocusout="set_week('hotel_week_start_saved_{{ week.pk }}', 'hotel_week_end_saved_{{ week.pk }}', 'hotel_date', '')"
                                                                ></td>
                                                                <td><input type="date" class="form-control"
                                                                           name="hotel_week_end"
                                                                           id="hotel_week_end_saved_{{ week.pk }}" value="{{ week.endDate|date:"Y-m-d" }}" readonly></td>
                                                                <td><input type="text" class="form-control subtotal"
                                                                           name="hotel_week_subtotal"
                                                                           id="hotel_week_subtotal_saved_{{ week.pk }}" placeholder="Subtotal"
                                                                           data-toggle="modal"
                                                                           data-target="#Hotel_Expense_Modal_saved_{{ week.pk }}" readonly></td>
                                                                <td colspan="1"><input type="button" width="48"
                                                                                       class="form-control btn btn-outline-primary"
                                                                                       name="view" value="Edit"
                                                                                       id="view" data-toggle="modal"
                                                                                       data-target="#Hotel_Expense_Modal_saved_{{ week.pk }}"></td>
                                                            </tr>
                                                        {% endfor %}
                                                    {% endif %}
                                                    </tbody>
                                                    <tfoot {% if user_is_creator == False and request.session.department != 'Supporting - Accounting' %}style="display: none"{% endif %}>
                                                    <tr>
                                                        <td colspan="1">
                                                            <div name="gl_account_label_hotel" class="input-group-text" id="basic-addon1">
                                                                GL Account :
                                                                {% if gls_chosen.Section2 != None %}
                                                                    {{ gls_chosen.Section2.glAccount.glCode }}
                                                                {% else %}
                                                                    {% for account in gl_accounts %}
                                                                        {% if gl_accounts.0 == account %}
                                                                            {{ account.glCode }}
                                                                        {% endif %}
                                                                    {% endfor %}
                                                                {% endif %}</div>

                                                        </td>
                                                        <td colspan="3">
                                                            <select class="multisteps-form__input form-control" id="gl_account_hotel"
                                                                    name="gl_account_hotel" onchange="update_gl()">
                                                                {% for account in gl_accounts %}
                                                                    <option value="{{ account.glCode }}"
                                                                            {% if account == gls_chosen.Section2.glAccount %}selected{% endif %}>{{ account.glDescription }}</option>
                                                                {% endfor %}
                                                            </select>
                                                        </td>
                                                    </tr>
                                                    </tfoot>
                                                </table>
                                            </div>
                                            <div class="card-body ">
                                                <h5 class="card-title">Transportation</h5>
                                                <h5>
                                                    <a class="btn btn-outline-danger float-md-right"
                                                       onclick="deleteRow('tableadd_expense_transportation')" id="delete_week_transportation">Delete Week
                                                        (Transportation)</a>
                                                    <a class="btn btn-outline-success float-none"
                                                       id="addnew_transportation">Add New Week
                                                        (Transportation)</a>
                                                </h5>

                                                <table class="table" id="transportation_expense_table">
                                                    <thead>
                                                    <tr>
                                                        <th></th>
                                                        <th>WEEK START DATE</th>
                                                        <th>WEEK END DATE</th>
                                                        <th>SUBTOTAL</th>
                                                        <th>VIEW</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody id="tableadd_expense_transportation">
                                                    {% if transportation_weeks == None %}
                                                        <tr>
                                                            <td colspan="1"><input type="checkbox" id="row_checkbox_transportation_unsaved_0"></td>
                                                            <td><input type="date" class="form-control"
                                                                       name="transportation_week_start"
                                                                       id="transportation_week_start_unsaved_0"
                                                                       onfocusout="set_week('transportation_week_start_unsaved_0', 'transportation_week_end_unsaved_0', 'transportation_date', '')"
                                                            ></td>
                                                            <td><input type="date" class="form-control"
                                                                       name="transportation_week_end"
                                                                       id="transportation_week_end_unsaved_0"
                                                                       readonly
                                                            ></td>
                                                            <td><input type="text" class="form-control subtotal"
                                                                       name="transportation_week_subtotal"
                                                                       id="transportation_week_subtotal_unsaved_0"
                                                                       placeholder="Subtotal" data-toggle="modal"
                                                                       data-target="#Transportation_Expense_Modal_unsaved_0" readonly>
                                                            </td>
                                                            <td colspan="1"><input type="button" width="48"
                                                                                   class="form-control btn btn-outline-primary"
                                                                                   name="view" value="Edit"
                                                                                   id="view" data-toggle="modal"
                                                                                   data-target="#Transportation_Expense_Modal_unsaved_0">
                                                            </td>
                                                        </tr>
                                                    {% else %}
                                                        {% for week in transportation_weeks %}
                                                            <tr>
                                                                <td colspan="1"><input type="checkbox" id="row_checkbox_transportation_saved_{{ week.pk }}"></td>
                                                                <td><input type="date" class="form-control"
                                                                           name="transportation_week_start"
                                                                           id="transportation_week_start_saved_{{ week.pk }}"
                                                                           value="{{ week.startDate|date:"Y-m-d" }}"
                                                                           onfocusout="set_week('transportation_week_start_saved_{{ week.pk }}', 'transportation_week_end_saved_{{ week.pk }}', 'transportation_date', '')"
                                                                ></td>
                                                                <td><input type="date" class="form-control"
                                                                           name="transportation_week_end"
                                                                           id="transportation_week_end_saved_{{ week.pk }}"
                                                                           value="{{ week.endDate|date:"Y-m-d" }}"
                                                                           readonly
                                                                ></td>
                                                                <td><input type="text" class="form-control subtotal"
                                                                           name="transportation_week_subtotal"
                                                                           id="transportation_week_subtotal_saved_{{ week.pk }}"
                                                                           placeholder="Subtotal" data-toggle="modal"
                                                                           data-target="#Transportation_Expense_Modal_saved_{{ week.pk }}" readonly>
                                                                </td>
                                                                <td colspan="1"><input type="button" width="48"
                                                                                       class="form-control btn btn-outline-primary"
                                                                                       name="view" value="Edit"
                                                                                       id="view" data-toggle="modal"
                                                                                       data-target="#Transportation_Expense_Modal_saved_{{ week.pk }}">
                                                                </td>
                                                            </tr>
                                                        {% endfor %}
                                                    {% endif %}
                                                    </tbody>
                                                    <tfoot {% if user_is_creator == False and request.session.department != 'Supporting - Accounting' %}style="display: none"{% endif %}>
                                                    <tr>
                                                        <td colspan="1">
                                                            <div name="gl_account_label_transportation" class="input-group-text" id="basic-addon1">
                                                                GL Account :
                                                                {% if gls_chosen != None %}
                                                                    {{ gls_chosen.Section3.glAccount.glCode }}
                                                                {% else %}
                                                                    {% for account in gl_accounts %}
                                                                        {% if gl_accounts.0 == account %}
                                                                            {{ account.glCode }}
                                                                        {% endif %}
                                                                    {% endfor %}
                                                                {% endif %}</div>

                                                        </td>
                                                        <td colspan="3">
                                                            <select class="multisteps-form__input form-control" id="gl_account_transportation"
                                                                    name="gl_account_transportation" onchange="update_gl()">
                                                                {% for account in gl_accounts %}
                                                                    <option value="{{ account.glCode }}"
                                                                            {% if account == gls_chosen.Section3.glAccount %}selected{% endif %}>{{ account.glDescription }}</option>
                                                                {% endfor %}
                                                            </select>
                                                        </td>
                                                    </tr>

                                                    </tfoot>


                                                </table>
                                            </div>
                                        </div>




                                        <div class="card col-12" style="margin-bottom: 50px">
                                            <h5 class="card-header" style="background: #2b5797; color: #ffffff">
                                                Business Expense
                                            </h5>
                                            <div class="card-body ">
                                                <h5 class="card-title">Meal</h5>
                                                <h5>
                                                    <a class="btn btn-outline-danger float-md-right"
                                                       id="delete_week_business_meal"
                                                       onclick="deleteRow('tableadd_business_expense_meal')">Delete
                                                        Week(Business Meal)</a>
                                                    <a class="btn btn-outline-success float-none"
                                                       id="addnew_business_meal">Add New
                                                        Week(Business Meal)</a>
                                                </h5>
                                                <table class="table" id="business_meal_table">
                                                    <thead>
                                                    <tr>
                                                        <th></th>
                                                        <th>WEEK START DATE</th>
                                                        <th>WEEK END DATE</th>
                                                        <th>SUBTOTAL</th>
                                                        <th>VIEW</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody id="tableadd_business_expense_meal">
                                                    {% if b_meal_weeks == None %}
                                                        <tr>
                                                            <td colspan="1"><input type="checkbox" id="row_checkbox_business_meal_unsaved_0"></td>
                                                            <td><input type="date" class="form-control"
                                                                       name="businessmeal_week_start"
                                                                       id="businessmeal_week_start_unsaved_0"
                                                                       onfocusout="set_week('businessmeal_week_start_unsaved_0', 'businessmeal_week_end_unsaved_0', 'business_meal_date', 'business_meal_perdiem_date')"
                                                            ></td>
                                                            <td><input type="date" class="form-control"
                                                                       name="businessmeal_week_end"
                                                                       id="businessmeal_week_end_unsaved_0"
                                                                       readonly
                                                            ></td>
                                                            <td><input type="text" class="form-control subtotal"
                                                                       name="businessmeal_week_subtotal"
                                                                       id="businessmeal_week_subtotal_unsaved_0"
                                                                       placeholder="Subtotal"
                                                                       data-toggle="modal"
                                                                       data-target="#BusinessMeal_Expense_Modal_unsaved_0"
                                                                       readonly></td>
                                                            <td colspan="1"><input type="button" width="48"
                                                                                   class="form-control btn btn-outline-primary"
                                                                                   name="view" value="Edit"
                                                                                   id="view" data-toggle="modal"
                                                                                   data-target="#BusinessMeal_Expense_Modal_unsaved_0">
                                                            </td>
                                                        </tr>
                                                    {% else %}
                                                        {% for week in b_meal_weeks %}
                                                            <tr>
                                                                <td colspan="1"><input type="checkbox" id="row_checkbox_business_meal_saved_{{ week.pk }}"></td>
                                                                <td><input type="date" class="form-control"
                                                                           name="businessmeal_week_start"
                                                                           id="businessmeal_week_start_saved_{{ week.pk }}"
                                                                           value="{{ week.startDate|date:"Y-m-d" }}"
                                                                           onfocusout="set_week('businessmeal_week_start_saved_{{ week.pk }}', 'businessmeal_week_end_saved_{{ week.pk }}', 'business_meal_date', 'business_meal_perdiem_date')"
                                                                ></td>
                                                                <td><input type="date" class="form-control"
                                                                           name="businessmeal_week_end"
                                                                           id="businessmeal_week_end_saved_{{ week.pk }}"
                                                                           value="{{ week.endDate|date:"Y-m-d" }}"
                                                                           readonly
                                                                ></td>
                                                                <td><input type="text" class="form-control subtotal"
                                                                           name="businessmeal_week_subtotal"
                                                                           id="businessmeal_week_subtotal_saved_{{ week.pk }}"
                                                                           placeholder="Subtotal"
                                                                           data-toggle="modal"
                                                                           data-target="#BusinessMeal_Expense_Modal_saved_{{ week.pk }}"
                                                                           readonly></td>
                                                                <td colspan="1"><input type="button" width="48"
                                                                                       class="form-control btn btn-outline-primary"
                                                                                       name="view" value="Edit"
                                                                                       id="view" data-toggle="modal"
                                                                                       data-target="#BusinessMeal_Expense_Modal_saved_{{ week.pk }}">
                                                                </td>
                                                            </tr>
                                                        {% endfor %}
                                                    {% endif %}
                                                    </tbody>
                                                    <tfoot {% if user_is_creator == False and request.session.department != 'Supporting - Accounting' %}style="display: none"{% endif %}>
                                                    <tr>
                                                        <td colspan="1">
                                                            <div name="gl_account_label_b_meal" class="input-group-text" id="basic-addon1">
                                                                GL Account :
                                                                {% if gls_chosen != None %}
                                                                    {{ gls_chosen.Section4.glAccount.glCode }}
                                                                {% else %}
                                                                    {% for account in gl_accounts %}
                                                                        {% if gl_accounts.0 == account %}
                                                                            {{ account.glCode }}
                                                                        {% endif %}
                                                                    {% endfor %}
                                                                {% endif %}</div>

                                                        </td>
                                                        <td colspan="3">
                                                            <select class="multisteps-form__input form-control" id="gl_account_b_meal"
                                                                    name="gl_account_b_meal" onchange="update_gl()">
                                                                {% for account in gl_accounts %}
                                                                    <option value="{{ account.glCode }}"
                                                                            {% if account == gls_chosen.Section4.glAccount %}selected{% endif %}>{{ account.glDescription }}</option>
                                                                {% endfor %}
                                                            </select>
                                                        </td>
                                                    </tr>


                                                    </tfoot>
                                                </table>
                                            </div>

                                            <div class="card-body ">
                                                <h5 class="card-title">Others</h5>
                                                <h5>
                                                    <a class="btn btn-outline-danger float-md-right"
                                                       onclick="deleteRow('tableadd_others')" id="delete_week_others">Delete Week (Others)</a>
                                                    <a class="btn btn-outline-success float-none"
                                                       id="addnew_others">Add
                                                        New Week (Others)</a>
                                                </h5>

                                                <table class="table" id="business_others_table">
                                                    <thead>
                                                    <tr>
                                                        <th></th>
                                                        <th>WEEK START DATE</th>
                                                        <th>WEEK END DATE</th>
                                                        <th>SUBTOTAL</th>
                                                        <th>VIEW</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody id="tableadd_others">

                                                    {% if other_weeks == None %}
                                                        <tr>
                                                            <td colspan="1"><input type="checkbox" id="row_checkbox_other_unsaved_0"></td>
                                                            <td><input type="date" class="form-control"
                                                                       name="others_week_start"
                                                                       id="others_week_start_unsaved_0"
                                                                       onfocusout="set_week('others_week_start_unsaved_0', 'others_week_end_unsaved_0', 'others_date', '')"
                                                            ></td>
                                                            <td><input type="date" class="form-control"
                                                                       name="others_week_end"
                                                                       id="others_week_end_unsaved_0"
                                                                       readonly
                                                            ></td>
                                                            <td><input type="text" class="form-control subtotal"
                                                                       name="others_week_subtotal"
                                                                       id="others_week_subtotal_unsaved_0"
                                                                       placeholder="Subtotal"
                                                                       data-toggle="modal"
                                                                       data-target="#Others_Expense_Modal_unsaved_0"
                                                                       readonly></td>
                                                            <td colspan="1"><input type="button" width="48"
                                                                                   class="form-control btn btn-outline-primary"
                                                                                   name="view" value="Edit"
                                                                                   id="view" data-toggle="modal"
                                                                                   data-target="#Others_Expense_Modal_unsaved_0">
                                                            </td>
                                                        </tr>
                                                    {% else %}
                                                        {% for week in other_weeks %}
                                                            <tr>
                                                                <td colspan="1"><input type="checkbox" id="row_checkbox_other_saved_{{ week.pk }}"></td>
                                                                <td><input type="date" class="form-control"
                                                                           name="others_week_start"
                                                                           id="others_week_start_saved_{{ week.pk }}"
                                                                           value="{{ week.startDate|date:"Y-m-d" }}"
                                                                           onfocusout="set_week('others_week_start_saved_{{ week.pk }}', 'others_week_end_saved_{{ week.pk }}', 'others_date', '')"
                                                                ></td>
                                                                <td><input type="date" class="form-control"
                                                                           name="others_week_end"
                                                                           id="others_week_end_saved_{{ week.pk }}"
                                                                           value="{{ week.endDate|date:"Y-m-d" }}"
                                                                           readonly
                                                                ></td>
                                                                <td><input type="text" class="form-control subtotal"
                                                                           name="others_week_subtotal"
                                                                           id="others_week_subtotal_saved_{{ week.pk }}"
                                                                           placeholder="Subtotal"
                                                                           data-toggle="modal"
                                                                           data-target="#Others_Expense_Modal_saved_{{ week.pk }}"
                                                                           readonly></td>
                                                                <td colspan="1"><input type="button" width="48"
                                                                                       class="form-control btn btn-outline-primary"
                                                                                       name="view" value="Edit"
                                                                                       id="view" data-toggle="modal"
                                                                                       data-target="#Others_Expense_Modal_saved_{{ week.pk }}">
                                                                </td>
                                                            </tr>
                                                        {% endfor %}
                                                    {% endif %}
                                                    </tbody>
                                                    <tfoot {% if user_is_creator == False and request.session.department != 'Supporting - Accounting' %}style="display: none"{% endif %}>
                                                    <tr>
                                                        <td colspan="1">
                                                            <div name="gl_account_label_others" class="input-group-text" id="basic-addon1">
                                                                GL Account :
                                                                {% if gls_chosen != None %}
                                                                    {{ gls_chosen.Section5.glAccount.glCode }}
                                                                {% else %}
                                                                    {% for account in gl_accounts %}
                                                                        {% if gl_accounts.0 == account %}
                                                                            {{ account.glCode }}
                                                                        {% endif %}
                                                                    {% endfor %}
                                                                {% endif %}</div>

                                                        </td>
                                                        <td colspan="3">
                                                            <select class="multisteps-form__input form-control" id="gl_account_others"
                                                                    name="gl_account_others" onchange="update_gl()">
                                                                {% for account in gl_accounts %}
                                                                    <option value="{{ account.glCode }}"
                                                                            {% if account == gls_chosen.Section5.glAccount %}selected{% endif %}>{{ account.glDescription }}</option>
                                                                {% endfor %}
                                                            </select>
                                                        </td>
                                                    </tr>
                                                    </tfoot>
                                                </table>

                                            </div>

                                            <div class="card-body">
                                                <h5 class="card-title">Business Expense Explanations</h5>
                                                <h5>
                                                    <a class="btn btn-outline-danger float-md-right"
                                                       onclick="deleteRow('tableadd_bee')" id="delete_week_bee">Delete Explanation (Business Expense Explanation)</a>
                                                    <a class="btn btn-outline-success float-none"
                                                       id="addnew_bee">Add
                                                        New Explanation (Business Expense Explanations)</a>
                                                </h5>

                                                <table class="table" id="bee_table">
                                                    <thead>
                                                    <tr>
                                                        <th></th>
                                                        <th>Business Expense Purpose</th>
                                                        <th></th>
                                                        <th></th>
                                                        <th></th>
                                                        <th></th>
                                                        <th>VIEW</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody id="tableadd_bee">
                                                    {% if forms_BEExplanations == None %}
                                                        <tr>
                                                            <td><input type="checkbox" id="row_checkbox_bee_unsaved_0"></td>
                                                            <td colspan="5"><input type="text" class="form-control subtotal"
                                                                                   name="bee_show_purpose"
                                                                                   id="bee_show_purpose_unsaved_0"
                                                                                   placeholder="Purpose of Expense"
                                                                                   data-toggle="modal"
                                                                                   data-target="#Bee_Modal_unsaved_0"
                                                                                   readonly></td>
                                                            <td colspan="1"><input type="button" width="48"
                                                                                   class="form-control btn btn-outline-primary"
                                                                                   name="view" value="Edit"
                                                                                   id="view" data-toggle="modal"
                                                                                   data-target="#Bee_Modal_unsaved_0">
                                                            </td>
                                                        </tr>
                                                    {% else %}
                                                        {% for bee in forms_BEExplanations %}
                                                            <tr>
                                                                <td><input type="checkbox" id="row_checkbox_bee_saved_{{ bee.pk }}"></td>
                                                                <td colspan="5"><input type="text" class="form-control subtotal"
                                                                                       name="bee_show_purpose"
                                                                                       id="bee_show_purpose_saved_{{ bee.pk }}"
                                                                                       placeholder="Purpose of Expense"
                                                                                       data-toggle="modal"
                                                                                       data-target="#Bee_Modal_saved_{{ bee.pk }}"
                                                                        {% if bee.purpose != None %}
                                                                                       value="{{ bee.purpose }}"
                                                                        {% endif %}
                                                                                       readonly></td>
                                                                <td colspan="1"><input type="button" width="48"
                                                                                       class="form-control btn btn-outline-primary"
                                                                                       name="view" value="Edit"
                                                                                       id="view" data-toggle="modal"
                                                                                       data-target="#Bee_Modal_saved_{{ bee.pk }}">
                                                                </td>
                                                            </tr>
                                                        {% endfor %}
                                                    {% endif %}
                                                </table>

                                            </div>



                                            <div class="card-body ">
                                                <h5 class="card-title">Expenditure To Be Charged To The Company</h5>
                                                <h5>
                                                    <a class="btn btn-outline-danger float-md-right"
                                                       onclick="deleteRow('tableadd_expenditure')" id="delete_week_others">Delete Week</a>
                                                    <a class="btn btn-outline-success float-none"
                                                       id="addnew_expenditure">Add
                                                        New Week </a>
                                                </h5>

                                                <table class="table" id="expenditure_table">
                                                    <thead>
                                                    <tr>
                                                        <th></th>
                                                        <th>WEEK START DATE</th>
                                                        <th>WEEK END DATE</th>
                                                        <th>SUBTOTAL</th>
                                                        <th>VIEW</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody id="tableadd_expenditure">
                                                    {% if expenditure_weeks == None %}
                                                        <tr>
                                                            <td colspan="1"><input type="checkbox" id="row_checkbox_expenditure_unsaved_0"></td>
                                                            <td><input type="date" class="form-control"
                                                                       name="expenditure_week_start"
                                                                       id="expenditure_week_start_unsaved_0"
                                                                       onfocusout="set_week('expenditure_week_start_unsaved_0', 'expenditure_week_end_unsaved_0', 'expenditure_date', '')"
                                                            ></td>
                                                            <td><input type="date" class="form-control"
                                                                       name="expenditure_week_end"
                                                                       id="expenditure_week_end_unsaved_0"
                                                                       readonly
                                                            ></td>
                                                            <td><input type="text" class="form-control subtotal"
                                                                       name="expenditure_week_subtotal"
                                                                       id="expenditure_week_subtotal_unsaved_0"
                                                                       placeholder="Subtotal"
                                                                       data-toggle="modal"
                                                                       data-target="#Expenditure_Expense_Modal_unsaved_0"
                                                                       readonly></td>
                                                            <td colspan="1"><input type="button" width="48"
                                                                                   class="form-control btn btn-outline-primary"
                                                                                   name="view" value="Edit"
                                                                                   id="view" data-toggle="modal"
                                                                                   data-target="#Expenditure_Expense_Modal_unsaved_0">
                                                            </td>
                                                        </tr>
                                                    {% else %}
                                                        {% for week in expenditure_weeks %}
                                                            <tr>
                                                                <td colspan="1"><input type="checkbox" id="row_checkbox_expenditure_saved_{{ week.pk }}"></td>
                                                                <td><input type="date" class="form-control"
                                                                           name="expenditure_week_start"
                                                                           id="expenditure_week_start_saved_{{ week.pk }}"
                                                                           value="{{ week.startDate|date:"Y-m-d" }}"
                                                                           onfocusout="set_week('expenditure_week_start_saved_{{ week.pk }}', 'expenditure_week_end_saved_{{ week.pk }}', 'expenditure_date', '')"
                                                                ></td>
                                                                <td><input type="date" class="form-control"
                                                                           name="expenditure_week_end"
                                                                           id="expenditure_week_end_saved_{{ week.pk }}"
                                                                           value="{{ week.endDate|date:"Y-m-d" }}"
                                                                           readonly
                                                                ></td>
                                                                <td><input type="text" class="form-control subtotal"
                                                                           name="expenditure_week_subtotal"
                                                                           id="expenditure_week_subtotal_saved_{{ week.pk }}"
                                                                           placeholder="Subtotal"
                                                                           data-toggle="modal"
                                                                           data-target="#Expenditure_Expense_Modal_saved_{{ week.pk }}"
                                                                           readonly></td>
                                                                <td colspan="1"><input type="button" width="48"
                                                                                       class="form-control btn btn-outline-primary"
                                                                                       name="view" value="Edit"
                                                                                       id="view" data-toggle="modal"
                                                                                       data-target="#Expenditure_Expense_Modal_saved_{{ week.pk }}">
                                                                </td>
                                                            </tr>
                                                        {% endfor %}
                                                    {% endif %}
                                                    </tbody>
                                                    <tfoot {% if user_is_creator == False and request.session.department != 'Supporting - Accounting' %}style="display: none" {% endif %}>
                                                    <tr>
                                                        <td colspan="1">
                                                            <div name="gl_account_label_expenditure" class="input-group-text" id="basic-addon1">
                                                                GL Account :
                                                                {% if gls_chosen != None %}
                                                                    {{ gls_chosen.Section6.glAccount.glCode }}
                                                                {% else %}
                                                                    {% for account in gl_accounts %}
                                                                        {% if gl_accounts.0 == account %}
                                                                            {{ account.glCode }}
                                                                        {% endif %}
                                                                    {% endfor %}
                                                                {% endif %}</div>

                                                        </td>
                                                        <td colspan="3">
                                                            <select class="multisteps-form__input form-control" id="gl_account_expenditure"
                                                                    name="gl_account_expenditure" onchange="update_gl()">
                                                                {% for account in gl_accounts %}
                                                                    <option value="{{ account.glCode }}"
                                                                            {% if account == gls_chosen.Section6.glAccount %}selected{% endif %}>{{ account.glDescription }}</option>
                                                                {% endfor %}
                                                            </select>
                                                        </td>
                                                    </tr>


                                                    </tfoot>

                                                </table>
                                            </div>
                                        </div>



                                        <!--- BEGIN Upload files tables-->
                                        <div class="card col-12">
                                            <h5 class="card-header" style="background: #2b5797; color: #ffffff">
                                                Upload Files
                                            </h5>
                                            <!-- Mileage files --->
                                            <br>
                                            <div class="card-body">
                                                <h5 class="card-title" id="mileage_document_header"> Mileage Document:</h5>
                                                Upload files that prove that what you said in the mileage section is true
                                                <br>

                                                {% if mileage_docs != '' %}
                                                    {% if form_is_being_shown_to_approver == false %}Already {% endif %}Uploaded Mileage Proof Documents:<br>
                                                    {% for doc in mileage_docs %}
                                                        <a href="{% get_media_prefix %}{{ doc.file }}" target="_blank">{{ doc.fileName }}</a><br>
                                                    {% endfor %}
                                                {% endif %}<br>


                                                <h5>
                                                    <button {% if form_is_being_shown_to_approver %} hidden {% endif %}id="addnew_mileage_file" type="button" onclick="addRw('tableadd_mileage_doc')" class="btn btn-outline-success float-none">Add another document</button>
                                                    <button {% if form_is_being_shown_to_approver %} hidden {% endif %} id="delete_mileage_file" type="button" class="btn btn-outline-danger float-md-right" onclick="deleteRow('tableadd_mileage_doc')">Delete document</button><br>
                                                </h5>


                                                <table class="table" id="mileage_doc_table" {% if form_is_being_shown_to_approver %} hidden {% endif %}>
                                                    <thead>
                                                    <tr>
                                                        <th></th>
                                                        <th>UPLOAD FILES</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody id="tableadd_mileage_doc">
                                                    <tr>
                                                        <td colspan="1"><input type="checkbox" id="row_checkbox_mileage_doc_unsaved_0"></td>
                                                        <td><input class="multisteps-form__input form-control subtotal"
                                                                   id="supporting_document" name="supporting_document"
                                                                   placeholder="(Need to attached proof of payment)"
                                                                   type="file" ></td>
                                                    </tr>
                                                    </tbody>
                                                </table>

                                            </div>



                                            <!-- Personal Expense Files -->
                                            <br>
                                            <div class="card-body">
                                                <h5 class="card-title" id="personal_expense_file_label">Upload Documents Proving Personal Expenses <b>Not Required</b>:</h5>
                                                Upload files that prove that what you said in the personal expense section is true
                                                <br>

                                                {% if personal_docs != '' %}
                                                    {% if form_is_being_shown_to_approver == false %}Already {% endif %}Uploaded Personal Expense Proof Documents:<br>
                                                    {% for doc in personal_docs %}
                                                        <a href="{% get_media_prefix %}{{ doc.file }}" target="_blank">{{ doc.fileName }}</a><br>
                                                    {% endfor %}
                                                {% endif %}<br>

                                                <h5>
                                                    <button {% if form_is_being_shown_to_approver %} hidden {% endif %}id="addnew_p_file" type="button" onclick="addRw('tableadd_personal_doc')" class="btn btn-outline-success float-none">Add another document</button>
                                                    <button {% if form_is_being_shown_to_approver %} hidden {% endif %}id="delete_p_file" type="button" class="btn btn-outline-danger float-md-right" onclick="deleteRow('tableadd_personal_doc')">Delete document</button>
                                                    <br>
                                                </h5>

                                                <table class="table" id="personal_doc_table" {% if form_is_being_shown_to_approver %} hidden {% endif %}>
                                                    <thead>
                                                    <tr>
                                                        <th></th>
                                                        <th>UPLOAD FILES</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody id="tableadd_personal_doc">
                                                    <tr>
                                                        <td colspan="1"><input type="checkbox" id="row_checkbox_business_meal_unsaved_0"></td>
                                                        <td><input name="personal_file" class="multisteps-form__input form-control"
                                                                   type="file"></td>
                                                    </tr>
                                                    </tbody>
                                                </table>

                                            </div>

                                            <!-- business_expense_files -->
                                            <br>
                                            <div class="card-body">
                                                <h5 class="card-title" id="business_expense_file_label">Upload Document Proving Business Expenses <b>Not Required</b>:</h5>
                                                Upload files that prove that what you said in the business expense section is true
                                                <br>

                                                {% if business_docs != '' %}
                                                    {% if form_is_being_shown_to_approver == false %}Already {% endif %}Uploaded Business Expense Proof Documents:<br>
                                                    {% for doc in business_docs %}
                                                        <a href="{% get_media_prefix %}{{ doc.file }}" target="_blank">{{ doc.fileName }}</a><br>
                                                    {% endfor %}
                                                {% endif %}<br>
                                                <h5>
                                                    <button {% if form_is_being_shown_to_approver %} hidden {% endif %}id="addnew_b_file" type="button" onclick="addRw('tableadd_business_doc')" class="btn btn-outline-success float-none">Add another document</button>
                                                    <button {% if form_is_being_shown_to_approver %} hidden {% endif %}id="delete_b_file" type="button" class="btn btn-outline-danger float-md-right" onclick="deleteRow('tableadd_business_doc')">Delete document</button>
                                                    <br>
                                                </h5>
                                                <table class="table" id="business_doc_table" {% if form_is_being_shown_to_approver %} hidden {% endif %}>
                                                    <thead>
                                                    <tr>
                                                        <th></th>
                                                        <th>UPLOAD FILES</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody id="tableadd_business_doc">
                                                    <tr>
                                                        <td colspan="1"><input type="checkbox" id="row_checkbox_business_meal_unsaved_0"></td>
                                                        <td><input id="business_file" name="business_file" class="multisteps-form__input form-control"
                                                                   type="file"></td>
                                                    </tr>
                                                    </tbody>
                                                </table>

                                            </div>

                                            <!-- Proof of payment files -->
                                            <br>
                                            <div class="card-body">
                                                <h5 id="company_amount_due_file_label" class="card-title"> Proof of Payment Back To Company (Not Required):</h5>
                                                If required, it is because your total expenditures to be reimbursed is less than the advance amount given
                                                to you by the company and you need to upload files that prove that you paid company back the excess amount of money you asked for.
                                                <br>

                                                {% if payment_docs != '' %}
                                                    {% if form_is_being_shown_to_approver %}Already {% endif %}Uploaded Payment Proof Documents:<br>
                                                    {% for doc in payment_docs %}
                                                        <a href="{% get_media_prefix %}{{ doc.file }}" target="_blank">{{ doc.fileName }}</a><br>
                                                    {% endfor %}
                                                {% endif %}<br>
                                                <h5>
                                                    <button {% if form_is_being_shown_to_approver %} hidden {% endif %} id="addnew_pay_file" type="button" onclick="addRw('tableadd_pay_doc')" class="btn btn-outline-success float-none">Add another document</button>
                                                    <button {% if form_is_being_shown_to_approver %} hidden {% endif %} id="delete_pay_file" type="button" class="btn btn-outline-danger float-md-right" onclick="deleteRow('tableadd_pay_doc')">Delete document</button>
                                                    <br>
                                                </h5>
                                                <table class="table" id="pay_doc_table" {% if form_is_being_shown_to_approver %} hidden {% endif %}>
                                                    <thead>
                                                    <tr>
                                                        <th></th>
                                                        <th>UPLOAD FILES</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody id="tableadd_pay_doc">
                                                    <tr>
                                                        <td colspan="1"><input type="checkbox" id="row_checkbox_business_meal_unsaved_0"></td>
                                                        <td><input class="multisteps-form__input form-control subtotal"
                                                                   id="company_amount_due_file" name="company_amount_due_file"
                                                                   placeholder="(Need to attached proof of payment)"
                                                                   type="file"></td>
                                                    </tr>
                                                    </tbody>
                                                </table>

                                            </div>
                                        </div>

                                        <!-- END upload files tables -->


                                    </div>
                                </div>


                                <div class="row col-12">
                                    <div class="button-row d-flex mt-4 col-12">
                                        <button class="btn btn-danger js-btn-prev" type="button"
                                                title="Prev">
                                            Prev
                                        </button>
                                        <input class="btn btn-success ml-auto js-btn-next" type="submit"
                                               name="submit_button" value="Submit" onclick="return check_weeks(true);"
                                                {% if form_is_being_shown_to_approver %} hidden {% endif %}>
                                        {% if form_is_being_shown_to_approver %}
                                            <button class="btn btn-primary ml-auto js-btn-next" type="button" title="Next">
                                                Next
                                            </button>
                                        {% endif %}
                                    </div>
                                    <div class="button-row d-flex mt-4 col-12">
                                        <input class="btn btn-outline-info btn-lg btn-block"
                                               name="submit_button" type="submit"
                                               title="Save" value="Save" onclick="return check_weeks(false);"{% if form_is_being_shown_to_approver %} hidden {% endif %}>

                                    </div>

                                </div>
                            </div>

                            {% if travel_adv_exists and request.session.department == 'Supporting - Accounting' or travel_adv_exists and request.session.department == 'Supporting - Cost Management' %}
                                <div class="multisteps-form__panel shadow p-4 rounded bg-white" data-animation="scaleIn">
                                    <h3 class="multisteps-form__title"> SAP Information </h3>
                                    <div class="multisteps-form__content">
                                        <!--Advance Table starts Here-->

                                        <!--Fix the id here, remove readonly,oninput compare the amount-->
                                        <div class="form-row mt-4" data-animation="scaleIn" >
                                            <div class="col-12 col-sm-3 mt-4 mt-sm-0">
                                                <label for="advance_amount" class="control-label"> TA Advance
                                                    Amount:
                                                </label>
                                                <input
                                                        class="multisteps-form__input form-control numberinput"
                                                        id="advance_amount" name="advance_amount" {% if request.session.department != 'Supporting - Accounting' %}readonly{% endif %}
                                                        {% if tr_advance.advAmount != None %}value="{{ tr_advance.advAmount }}"{% endif %}>
                                            </div>

                                            <div class="col-12 col-sm-3 mt-4 mt-sm-0">
                                                <label for="advanceprofit_center" class="control-label"> Company Code : </label>
                                                <input class="multisteps-form__input form-control"
                                                       id="company_code" name="company_code"
                                                        {% if tr_advance.companyCode != None %}
                                                       value="{{ tr_advance.companyCode }}"
                                                        {% else %}
                                                       value="{{ business_unit_code }}"
                                                        {% endif %}
                                                        {% if request.session.department != 'Supporting - Accounting' %}
                                                       readonly {% endif %}/>
                                            </div>

                                            <div class="col-12 col-sm-3 mt-4 mt-sm-0">
                                                <label for="gl_account" class="control-label"> Currency: </label>
                                                <input class="multisteps-form__input form-control"
                                                       id="currency"
                                                       name="currency" maxlength="50"
                                                        {% if tr_advance.currency != None %}
                                                       value="{{ tr_advance.currency }}"{% endif %}
                                                        {% if request.session.department != 'Supporting - Accounting' %}
                                                       readonly {% endif %}/>
                                            </div>
                                            <div class="col-12 col-sm-3 mt-4 mt-sm-0">

                                                <label for="gl_description" class="control-label"> Invoice Date
                                                    :</label>
                                                <input class="multisteps-form__input form-control"
                                                       id="invoice_date" name="invoice_date" maxlength="50" type="date" {% if tr_advance.dateApplied != None %}value="{{ tr_advance.dateApplied|date:"Y-m-d" }}"{% endif %}
                                                        {% if request.session.department != 'Supporting - Accounting' %}
                                                       readonly {% endif %} placeholder="Will be set on submit">

                                            </div>
                                        </div>
                                        <div class="form-row mt-4" data-animation="scaleIn">

                                            <div class="col-12 col-sm-3">
                                                <label for="cost_center" class="control-label"> Cost Center
                                                    : </label>
                                                <input class="multisteps-form__input form-control"
                                                       id="cost_center"
                                                       name="cost_center"
                                                        {% if tr_advance.costCenterCode != None %}
                                                       value="{{ tr_advance.costCenterCode }}"
                                                        {% else %}
                                                       value="{{ user_dept_code }}"
                                                        {% endif %}
                                                        {% if request.session.department != 'Supporting - Accounting' %}
                                                       readonly {% endif %}/>
                                            </div>

                                            <div class="col-12 col-sm-3 mt-4 mt-sm-0">
                                                <label for="text" class="control-label"> TA Doc Number : </label>
                                                <textarea style="resize: none" rows="2" class="multisteps-form__input form-control" id="ta_doc_num"
                                                          name="ta_doc_num" type="textarea" maxlength="25" {% if request.session.department != 'Supporting - Accounting' %}
                                                          readonly {% endif %}>{% if tr_advance.taDocNo != None %}{{tr_advance.taDocNo}}{% endif %}</textarea>
                                            </div>
                                            <div class="col-12 col-sm-3 mt-4 mt-sm-0">
                                                <label for="head_text" class="control-label"> Head Text
                                                    : </label>
                                                <textarea style="resize: none" rows="2"  class="multisteps-form__input form-control"
                                                          id="head_text" maxlength="50"
                                                          name="head_text" type="textarea"
                                                        {% if request.session.department != 'Supporting - Accounting' %}
                                                          readonly {% endif %}>{% if tr_advance.headText != None %}{{tr_advance.headText}}{% endif %}</textarea>
                                            </div>

                                            <div class="col-12 col-sm-3 mt-4 mt-sm-0">
                                                <label for="head_text" class="control-label"> Vendor Code
                                                    : </label>
                                                <textarea style="resize: none" rows="2" class="multisteps-form__input form-control"
                                                          id="vendor_code" maxlength="15"
                                                          name="vendor_code" type="textarea"
                                                        {% if request.session.department != 'Supporting - Accounting' %}
                                                          readonly {% endif %}>{% if tr_advance.vendorCode != None %}{{tr_advance.vendorCode}}{% else %}{% if vendor != None %}{{vendor}}{% else %}{% if travel_advance.vendorCode != None %}{{travel_advance.vendorCode}}{% endif %}{% endif %}{% endif %}</textarea>
                                            </div>


                                        </div>

                                        <div class="form-row mt-4" data-animation="scaleIn">


                                            <div class="col-12 col-sm-3">
                                                <label for="assignment" class="control-label"> Assignment
                                                    : </label>
                                                <textarea style="resize: none" rows="2" class="multisteps-form__input form-control"
                                                          id="assignment" name="assignment" type="textarea"
                                                          maxlength="100"
                                                        {% if request.session.department != 'Supporting - Accounting' %}
                                                          readonly {% endif %}>{% if tr_advance.assignment != None %}{{tr_advance.assignment}}{% else %}{{user_dept_code}}{% endif %}</textarea>
                                            </div>

                                            <input hidden id="vendor_code" value="{{ vendor.vendorCode }}">


                                            <div class="col-12 col-sm-3 mt-4 mt-sm-0">
                                                <label for="text" class="control-label"> Text : </label>
                                                <textarea style="resize: none" rows="2" class="multisteps-form__input form-control" id="text"
                                                          name="text" type="textarea" maxlength="50"
                                                        {% if request.session.department != 'Supporting - Accounting' %}
                                                          readonly {% endif %}>{%if tr_advance.text != None%}{{tr_advance.text}}{%endif%}</textarea>
                                            </div>

                                            <div class="col-12 col-sm-3 mt-4 mt-sm-0">
                                                <label for="text" class="control-label"> Invoice Number : </label>
                                                <textarea style="resize: none" rows="2" class="multisteps-form__input form-control" id="invoice_number"
                                                          name="invoice_number" type="textarea" maxlength="25"
                                                        {% if request.session.department != 'Supporting - Accounting' %}
                                                          readonly {% endif %}>{%if tr_advance.invoiceNo != None%}{{tr_advance.invoiceNo}}{%endif%}</textarea>
                                            </div>



                                        </div>
                                    </div>
                                    <div class="button-row d-flex mt-4 col-12">
                                        <button class="btn btn-danger js-btn-prev" type="button"
                                                title="Prev">
                                            Prev
                                        </button>

                                        <button class="btn btn-primary ml-auto js-btn-next" type="button" title="Next">
                                            Next
                                        </button>

                                    </div>
                                </div>

                                <input hidden readonly class='switchable_field_id' value='advance_amount'>
                                <input hidden readonly class='switchable_field_id' value='invoice_date'>
                                <input hidden readonly class='switchable_field_id' value='ta_doc_num'>
                            {% else %}
                                {% if user_is_creator %}
                                    <input hidden class="multisteps-form__input form-control numberinput"
                                           id="advance_amount" name="advance_amount" readonly
                                           {% if tr_advance.advAmount != None %}value="{{ tr_advance.advAmount }}" {% else %} value="0" {% endif %}>

                                    <input class="multisteps-form__input form-control"
                                           id="company_code" name="company_code"
                                            {% if tr_advance.companyCode != None %}
                                           value="{{ tr_advance.companyCode }}"
                                            {% else %}
                                           value="{{ business_unit_code }}"
                                            {% endif %}
                                           readonly hidden/>


                                    <input class="multisteps-form__input form-control"
                                           id="currency"
                                           name="currency" maxlength="50"
                                            {% if tr_advance.currency != None %}
                                           value="{{ tr_advance.currency }}"{% endif %}
                                           readonly hidden/>

                                    <input class="multisteps-form__input form-control"
                                           id="invoice_date" name="invoice_date" maxlength="50" type="date" {% if tr_advance.dateApplied != None %}value="{{ tr_advance.dateApplied|date:"Y-m-d" }}"{% endif %}
                                           readonly hidden>

                                    <input class="multisteps-form__input form-control"
                                           id="cost_center"
                                           name="cost_center"
                                            {% if tr_advance.costCenterCode != None %}
                                           value="{{ tr_advance.costCenterCode }}"
                                            {% else %}
                                           value="{{ user_dept_code }}"
                                            {% endif %}
                                           readonly hidden/>

                                    <textarea style="resize: none" rows="2" class="multisteps-form__input form-control" id="ta_doc_num"
                                              name="ta_doc_num" type="textarea" maxlength="25"
                                              readonly hidden>{% if tr_advance.taDocNo != None %}{{tr_advance.taDocNo}}{% endif %}</textarea>

                                    <textarea style="resize: none" rows="2"  class="multisteps-form__input form-control"
                                              id="head_text" maxlength="50"
                                              name="head_text" type="textarea"
                                              readonly hidden>{% if tr_advance.headText != None %}{{tr_advance.headText}}{% endif %}</textarea>

                                    <textarea style="resize: none" rows="2" class="multisteps-form__input form-control"
                                              id="vendor_code" maxlength="15"
                                              name="vendor_code" type="textarea"
                                              readonly hidden>{% if tr_advance.vendorCode != None %}{{tr_advance.vendorCode}}{% else %}{% if vendor != None %}{{vendor.vendorCode}}{% endif %}{% endif %}</textarea>

                                    <textarea style="resize: none" rows="2" class="multisteps-form__input form-control"
                                              id="assignment" name="assignment" type="textarea"
                                              maxlength="100"
                                              readonly hidden>{% if tr_advance.assignment != None %}{{tr_advance.assignment}}{% else %}{{user_dept_code}}{% endif %}</textarea>

                                    <input hidden id="vendor_code" value="{{ vendor.vendorCode }}">

                                    <textarea style="resize: none" rows="2" class="multisteps-form__input form-control" id="text"
                                              name="text" type="textarea" maxlength="50"
                                              readonly hidden>{%if tr_advance.text != None%}{{tr_advance.text}}{%endif%}</textarea>

                                    <textarea style="resize: none" rows="2" class="multisteps-form__input form-control" id="invoice_number"
                                              name="invoice_number" type="textarea" maxlength="25"
                                              readonly hidden>{%if tr_advance.invoiceNo != None%}{{tr_advance.invoiceNo}}{%endif%}</textarea>
                                {% endif %}
                            {% endif %}


                            <!--Summary form panel-->
                            <div class="multisteps-form__panel shadow p-4 rounded bg-white"
                                 data-animation="scaleIn">
                                <h3 class="multisteps-form__title">Summary</h3>
                                <div class="multisteps-form__content">


                                    <div class="form-row mt-4" data-animation="scaleIn">

                                        <div class="col-12 col-sm-6">
                                            <label for="allowance" class="control-label"> Expenditures To Be
                                                Reimbursed
                                                :</label>
                                            <div class="input-group-prepend">

                                                <input class="multisteps-form__input form-control subtotal"
                                                       id="expenditure_reimbursed" name="expenditure_reimbursed"
                                                       type="text" readonly/>
                                            </div>
                                        </div>

                                        <div class="col-12 col-sm-6">
                                            <label for="accomodation" class="control-label"> Expenditures Charged to
                                                Company :</label>
                                            <div class="input-group-prepend">

                                                <input class="multisteps-form__input form-control subtotal"
                                                       id="expenditure_charged" name="expenditure_charged"
                                                       type="text" readonly/>
                                            </div>
                                        </div>

                                    </div>


                                    <div class="form-row mt-4" data-animation="scaleIn">

                                        <div class="col-12 col-sm-6">
                                            <label for="allowance" class="control-label"> TA Travel Advance:</label>
                                            <div class="input-group-prepend">

                                                <input class="multisteps-form__input form-control subtotal"
                                                       id="travel_advance"
                                                       name="travel_advance"
                                                        {% if travel_advance.advAmount != None and travel_advance.advAmount != "" %}
                                                       value="{{ travel_advance.advAmount }}"
                                                        {% else %}
                                                       value="0.00"
                                                        {% endif %}
                                                       readonly/>
                                            </div>
                                        </div>

                                        <div class="col-12 col-sm-6">
                                            <label for="accomodation" class="control-label"> Amount Due to Employee
                                                :</label>
                                            <div class="input-group-prepend">

                                                <input class="multisteps-form__input form-control subtotal"
                                                       id="employee_amount_due" name="employee_amount_due"
                                                       type="text" readonly/>
                                            </div>
                                        </div>

                                    </div>

                                    <div class="form-row mt-4" data-animation="scaleIn">
                                        <div class="col-12 col-sm-6">
                                            <label for="allowance" class="control-label"> Amount Due to Company
                                                :</label>
                                            <div class="input-group-prepend">
                                                <input class="multisteps-form__input form-control subtotal"
                                                       id="company_amount_due" name="company_amount_due"
                                                       placeholder="(Need to attached proof of payment)"
                                                       type="text" readonly/>
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <label for="accomodation" class="control-label"> Total Expenditures
                                                :</label>
                                            <div class="input-group-prepend">

                                                <input class="multisteps-form__input form-control subtotal"
                                                       id="total_expenditures" name="total_expenditures"
                                                       type="text" readonly/>
                                            </div>
                                        </div>
                                    </div>



                                    <!--Summary buttons begins here-->
                                    <div class="row">
                                        <div class="button-row d-flex mt-4 col-12">
                                            <button class="btn btn-danger js-btn-prev" type="button" title="Prev">
                                                Prev
                                            </button>
                                            <button class="btn btn-primary ml-auto js-btn-next" type="button"
                                                    title="Next">Next
                                            </button>
                                        </div>
                                        <div class="button-row d-flex mt-4 col-12">
                                            <input class="btn btn-outline-info btn-lg btn-block"
                                                   name="submit_button"
                                                   type="submit"
                                                   title="Save" value="Save" onclick="return check_weeks(false);" {% if form_is_being_shown_to_approver %} hidden {% endif %}>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            {% if form_is_being_shown_to_approver %}
                                <div class="multisteps-form__panel shadow p-4 rounded bg-white" data-animation="scaleIn"
                                     id="approve_section">
                                <h3 class="multisteps-form__title">Approve</h3>
                                <div class="multisteps-form__content">
                                <div class="form-row mt-4" data-animation="scaleIn">
                                    <div class="col-6 col-sm-6">
                                        <label for="approver" class="control-label"> Approver : </label>
                                        <input class="multisteps-form__input form-control" id="approver"
                                               name="approver" type="text" placeholder="Approver Name"
                                               value="{{ approver_name }}" readonly/>
                                    </div>

                                    <div class="col-6 col-sm-6">
                                        <label for="date_approver" class="control-label"> Date : </label>
                                        <input class="multisteps-form__input form-control" id="date_approver"
                                               name="date_approver" {% if users_stage.date != None %}
                                               value='{{ users_stage.date }}'{% else %}
                                               value="{{ today }}" {% endif %} readonly/>
                                    </div>
                                </div>


                                <div class="form-row mt-4" data-animation="scaleIn">
                                    <div class="col-12 col-sm-12">
                                        <label for="comment" class="control-label"> Comment : </label>
                                        <textarea class="multisteps-form__input form-control" id="comment" maxlength="255"
                                                  name="comment"  {% if form_is_being_approved == False %}
                                                  readonly {% endif %}>{%if users_stage.comments != None%}{{users_stage.comments}}{%endif%}</textarea>
                                    </div>
                                </div>


                                <div class="form-row mt-4" data-animation="scaleIn">
                                    <div class="col-md-12">
                                        <table id="paf_table" class="table table-striped table-hover responsive" width="100%">
                                            <thead>
                                            <th>Approver Name</th>
                                            <th>Approver's Action</th>
                                            <th>Date</th>
                                            <th>Comment</th>

                                            </thead>
                                            <tbody>
                                            {% for stage in all_forms_stages %}
                                                <tr>
                                                    <td>
                                                        <em>{{ stage.approverID }}</em>
                                                    </td>
                                                    <td>
                                                        <em>{{ stage.actionTaken }}</em>
                                                    </td>
                                                    <td>
                                                        <em>
                                                            {{ stage.date|date:"N d, Y " }}{{ stage.date|time:"H:i" }}</em>
                                                    </td>
                                                    <td>
                                                        <em>{{ stage.comments }}</em>
                                                    </td>
                                                </tr>
                                            {% endfor %}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                {% if approving_modifications %}
                                    <div class="row">
                                        <div class="button-row d-flex mt-4 col-12">

                                            <input class="btn btn-danger js-btn-prev" type="submit"
                                                   name="submit_button" title="Prev"
                                                   value="Decline Modifications" onclick="document.getElementById('submit_button').value = 'Decline Modifications'">

                                            <input class="btn btn-success ml-auto js-btn-next"
                                                   name="submit_button" type="submit"
                                                   title="Next" value="Approve Modifications" onclick="document.getElementById('submit_button').value = 'Approve Modifications'">

                                        </div>
                                    </div>
                                {% endif %}

                                {% if form_is_being_approved == True and approving_modifications == False and form_is_declined == False %}
                                    {% if request.session.department == 'Supporting - General Service' and users_stage.actionTaken == '?' %}
                                        <input class="btn btn-success ml-auto js-btn-next" name="submit_button"
                                               type="submit"
                                               title="Next" value="Acknowlege" onclick="document.getElementById('submit_button').value = 'Acknowledge'">
                                    {% else %}
                                        <div class="row">
                                            <div class="button-row d-flex mt-4 col-12">
                                                <input class="btn btn-danger js-btn-prev" type="submit"
                                                       name="submit_button" title="Prev" value="Decline" onclick="document.getElementById('submit_button').value = 'Decline'">

                                                <input class="btn btn-success ml-auto js-btn-next"
                                                       name="submit_button" type="submit"
                                                       title="Next"
                                                        {% if request.session.department == 'Supporting - Accounting' %}
                                                       value="Submit and Approve" onclick="document.getElementById('submit_button').value='Submit and Approve'"{% else %}
                                                       value="Approve" onclick="document.getElementById('submit_button').value='Approve'"{% endif %}>

                                                <div id="allow_modify" class="btn btn-success ml-auto ">
                                                    <input class="btn btn-success ml-auto " id="modify_button"
                                                           name="modify_button" type="button"
                                                           title="Next" value="Modify"
                                                           onclick="modify_button_clicked()">
                                                </div>

                                                <div id="send_modify_hidden" class="btn btn-success ml-auto "
                                                     hidden></div>

                                                <input class="btn btn-success ml-auto " id="ask_approval_button"
                                                       name="ask_approval_button" type="button"
                                                       title="Next" value="Edit Approver List"
                                                       onclick="show_approver_form()">

                                            </div>
                                        </div>

                                        <div class="add_approver_form" id="add_approver_form">
                                        <div class="form-row mt-4">
                                            <div class="col-12 col-sm-6">
                                                <label for="add_approver_action" id="add_approver_action_label">Action:</label><br>
                                                <select name="add_approver_action" id="add_approver_action" onchange="change_approver_list_type()">
                                                    <option value="Add to approval list">Add new co-signers</option>
                                                    <option value="Replace me in approval list">Replace me in approval
                                                        list
                                                    </option>
                                                </select>
                                                <br><br>
                                            </div>

                                            <div class="col-12 col-sm-6">
                                                <label for="add_approvers_options" id="approvers_options_label">New Approver(s): <br><i>Hint: use shift or ctrl(windows)/command(mac) to select multiple people</i></label><br>
                                                <select name="add_approvers_options" id="add_approvers_options" multiple>
                                                    {% for employee in employees_for_add_new_approver %}
                                                        <option value="{{ employee.pk }}">{{ employee.firstName }}
                                                            {% if employee.middleName != None and employee.middleName != '' %}
                                                                {{ employee.middleName }} {% endif %}{{ employee.lastName }}</option>
                                                    {% endfor %}
                                                </select>
                                                <br>
                                            </div>
                                        </div>

                                        <input class="btn btn-success ml-auto js-btn-next" name="submit_button"
                                               id="approval_button" type="submit"
                                               title="Next" value="Change Approver List" onclick="document.getElementById('submit_button').value='Change Approver List'">
                                    {% endif %}
                                </div>
                                {% endif %}


                                <!---form Space-->

                            {% else %}
                                <div class="multisteps-form__panel shadow p-4 rounded bg-white"
                                     data-animation="scaleIn" >
                                <h3 class="multisteps-form__title d-flex justify-content-center">Access Denied</h3>
                                <div class="multisteps-form__content d-flex justify-content-center">

                                    Sorry but you are not authorized to approve this form.
                                    <br>
                                </div>



                                <div class="row col-12">
                                    <div class="button-row d-flex justify-content-center mt-4 col-12">
                                        <button class="btn btn-danger js-btn-prev" type="button"
                                                title="Prev">
                                            Prev
                                        </button>

                                    </div>



                                </div>
                            {% endif %}
                            </div>
                            </div>
                            </div>
                    </div>

                    <!--Modal for the weeks in Travel Information-->
                    <div id="mileage_popups">
                        {% if mileage_weeks == None %}
                            <div class="modal fade" id="Travel_Modal_unsaved_0" tabindex="-1" role="dialog"
                                 aria-labelledby="ModalCenterTitle" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="exampleModalLongTitle">Week Travel
                                                Information</h5>
                                            <button type="button" class="close" data-dismiss="modal"
                                                    aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">


                                            <div class="col-12">
                                                <label for="mileage" class="control-label">Mileage Rate:
                                                    ($0.575) </label>
                                            </div>
                                            <table class="table" id="travel_information">
                                                <thead>
                                                <tr>
                                                    <th>DATE</th>
                                                    <th>DEPARTURE (FROM)</th>
                                                    <th>DESTINATION (TO)</th>
                                                    <th>MILEAGE</th>
                                                    <th>AMOUNT</th>
                                                </tr>
                                                </thead>
                                                <tbody id="tableadd_popup">
                                                {% for day in days_of_the_week %}
                                                    <tr>
                                                        <td colspan="1"><input type="date"
                                                                               class="form-control" name="date" id="date_{{ day }}_unsaved_0" readonly></td>
                                                        <td><input type="text" class="form-control" id="departure_from_{{ day }}_unsaved_0" name="departure_from"
                                                                   maxlength="250"></td>
                                                        <td><input type="text" class="form-control" id="destination_to_{{ day }}_unsaved_0" name="destination_to"
                                                                   maxlength="250"></td>
                                                        <td><input type="text" class="form-control numberinput" id="mileage_{{ day }}_unsaved_0" name="mileage"
                                                                   maxlength="6"></td>
                                                        <td><input type="text" class="form-control numberinput" id="amount_{{ day }}_unsaved_0" name="amount"
                                                                   maxlength="6"></td>
                                                    </tr>
                                                {% endfor %}
                                                </tbody>
                                                <tfoot>
                                                <tr>
                                                    <td>
                                                            <span class="input-group-text"
                                                                  id="basic-addon1">Sub Total $:</span>

                                                    </td>
                                                    <td colspan="2">
                                                        <input class="multisteps-form__input form-control subtotal"
                                                               id="Travel_Modal_subtotal_unsaved_0" name="Travel_Modal_subtotal"
                                                               type="text" readonly/>
                                                    </td>
                                                    <td>
                                                            <span class="input-group-text"
                                                                  id="basic-addon1"> Total Mileage:</span>
                                                    </td>
                                                    <td colspan="1">
                                                        <input class="multisteps-form__input form-control subtotal"
                                                               id="sub_mileage_unsaved_0" name="sub_mileage"
                                                               type="text" readonly/>
                                                    </td>

                                                </tfoot>
                                            </table>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-success" data-dismiss="modal">Done
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {% else %}
                            {% for week in mileage_weeks %}
                                <div class="modal fade" id="Travel_Modal_saved_{{week.0.pk}}" tabindex="-1" role="dialog"
                                     aria-labelledby="ModalCenterTitle" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h5 class="modal-title" id="exampleModalLongTitle">Week Travel
                                                    Information</h5>
                                                <button type="button" class="close" data-dismiss="modal"
                                                        aria-label="Close">
                                                    <span aria-hidden="true">&times;</span>
                                                </button>
                                            </div>
                                            <div class="modal-body">
                                                <div class="col-12">
                                                    <label for="mileage" class="control-label">Mileage Rate:
                                                        ($0.575) </label>
                                                </div>
                                                <table class="table" id="travel_information">
                                                    <thead>
                                                    <tr>
                                                        <th>DATE</th>
                                                        <th>DEPARTURE (FROM)</th>
                                                        <th>DESTINATION (TO)</th>
                                                        <th>MILEAGE</th>
                                                        <th>AMOUNT</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody id="tableadd_popup">
                                                    {% for dictionary in daily_mileages %}
                                                        {% if dictionary.mileage.dayID.weekID.pk == week.0.pk %}
                                                            <tr>
                                                                <td colspan="1"><input type="date"
                                                                                       class="form-control" id="date_{{ dictionary.day }}_saved_{{ week.0.pk }}" name="date" value="{{ dictionary.mileage.dayID.date|date:"Y-m-d"}}" readonly></td>
                                                                <td><input type="text" class="form-control" id="departure_from_{{ dictionary.day }}_saved_{{ week.0.pk }}" name="departure_from"
                                                                           {% if dictionary.mileage.mileage.fromLocation != None %}value="{{ dictionary.mileage.mileage.fromLocation }}"{% endif %} maxlength="250"></td>
                                                                <td><input type="text" class="form-control" id="destination_to_{{ dictionary.day }}_saved_{{ week.0.pk }}" name="destination_to"
                                                                           {% if dictionary.mileage.mileage.toLocation != None %}value="{{ dictionary.mileage.mileage.toLocation }}" {% endif %} maxlength="250"></td>
                                                                <td><input type="text" class="form-control numberinput" id="mileage_{{ dictionary.day }}_saved_{{week.0.pk }}" name="mileage"
                                                                           maxlength="6"{% if dictionary.mileage.mileage.miles != None %} value="{{ dictionary.mileage.mileage.miles }}" {% endif %}></td>
                                                                <td><input type="text" class="form-control numberinput" id="amount_{{ dictionary.day }}_saved_{{ week.0.pk }}" name="amount"
                                                                           maxlength="6"{% if dictionary.mileage.mileage.amount != None %} value="{{ dictionary.mileage.mileage.amount }}" {% endif %}></td>
                                                            </tr>
                                                        {% endif %}
                                                    {% endfor %}
                                                    </tbody>
                                                    <tfoot>
                                                    <tr>
                                                        <td>
                                                            <span class="input-group-text"
                                                                  id="basic-addon1">Sub Total $:</span>

                                                        </td>
                                                        <td colspan="2">
                                                            <input class="multisteps-form__input form-control subtotal"
                                                                   id="Travel_Modal_subtotal_saved_{{ week.0.pk }}" name="Travel_Modal_subtotal"
                                                                   type="text" readonly/>
                                                        </td>
                                                        <td>
                                                            <span class="input-group-text"
                                                                  id="basic-addon1"> Total Mileage:</span>

                                                        </td>
                                                        <td colspan="1">
                                                            <input class="multisteps-form__input form-control subtotal"
                                                                   id="sub_mileage_saved_{{ week.0.pk }}" name="sub_mileage"
                                                                   type="text" readonly/>
                                                        </td>


                                                    </tr>



                                                    </tfoot>
                                                </table>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-success" data-dismiss="modal">Done
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        {% endif %}

                    </div>
                    <!--=================================================================================================================== Modal Personal Meal Expenses======================================================-->
                    <div id="personal_meal_popups">
                        {% if  p_meal_weeks == None %}
                            <div class="modal fade" id="Meal_Expense_Modal_unsaved_0" title="0" tabindex="-1" role="dialog"
                                 aria-labelledby="ModalCenterTitle" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="exampleModalLongTitle">Week Meal
                                                Expense</h5>
                                            <button type="button" class="close" data-dismiss="modal"
                                                    aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            <table class="table" id="expense_meal_table">
                                                <thead>
                                                <tr>

                                                    <th>BREAKFAST</th>
                                                    <th>LUNCH</th>
                                                    <th>DINNER</th>
                                                    <th>DATE</th>
                                                </tr>
                                                </thead>
                                                <tbody id="tableadd_personal_meal_popup">
                                                {% for day in days_of_the_week %}
                                                    <tr>
                                                        <td><input type="text" class="form-control numberinput"
                                                                   name="personal_breakfast" id="personal_breakfast_{{ day }}_unsaved_0"
                                                                   maxlength="6"></td>
                                                        <td><input type="text" class="form-control numberinput"
                                                                   name="personal_lunch"
                                                                   id="personal_lunch_{{ day }}_unsaved_0"  maxlength="6"></td>
                                                        <td><input type="text" class="form-control numberinput"
                                                                   name="personal_dinner"
                                                                   id="personal_dinner_{{ day }}_unsaved_0"  maxlength="6"></td>
                                                        <td colspan="1"><input type="date" readonly="readonly" width="48"
                                                                               class="form-control"
                                                                               name="personal_meal_date" title="0"
                                                                               id="personal_meal_date_{{ day }}_unsaved_0" maxlength="6"></td>
                                                    </tr>
                                                {% endfor %}
                                                <tr>
                                                    <td colspan="3">
                                                        <b>-OR-</b>
                                                    </td>
                                                </tr>
                                                {% for day in days_of_the_week %}
                                                    <tr>
                                                        <td>
                                                            <span class="input-group-text"
                                                                  id="basic-addon1">Per Diem Day {{ day|add:"1" }}:</span>

                                                        </td>
                                                        <td colspan="2">
                                                            <input class="multisteps-form__input form-control numberinput"
                                                                   id="personal_meal_perdiem_{{ day }}_unsaved_0" name="personal_meal_perdiem"
                                                                   type="text" maxlength="6"/>
                                                        </td>
                                                        <td>
                                                            <input class="form-control" type="date" id="personal_meal_perdiem_date_{{ day }}_unsaved_0"
                                                                   readonly
                                                                   name="personal_meal_perdiem_date">
                                                        </td>
                                                    </tr>
                                                {% endfor %}

                                                </tbody>
                                                <tfoot>

                                                <tr>
                                                    <td>
                                                            <span class="input-group-text"
                                                                  id="basic-addon1">Sub Total $:</span>

                                                    </td>
                                                    <td colspan="3">
                                                        <input class="multisteps-form__input form-control subtotal"
                                                               id="Meal_Expense_Modal_subtotal_unsaved_0" name="Meal_Expense_Modal_subtotal"
                                                               type="text" readonly/>
                                                    </td>

                                                </tr>

                                                </tfoot>
                                            </table>

                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-success" data-dismiss="modal">Done
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {% else %}
                            {% for week in p_meal_weeks %}
                                <div class="modal fade" id="Meal_Expense_Modal_saved_{{ week.pk }}" title="{{ week.pk }}" tabindex="-1" role="dialog"
                                     aria-labelledby="ModalCenterTitle" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h5 class="modal-title" id="exampleModalLongTitle">Week Meal
                                                    Expense</h5>
                                                <button type="button" class="close" data-dismiss="modal"
                                                        aria-label="Close">
                                                    <span aria-hidden="true">&times;</span>
                                                </button>
                                            </div>
                                            <div class="modal-body">
                                                <table class="table" id="expense_meal_table">
                                                    <thead>
                                                    <tr>

                                                        <th>BREAKFAST</th>
                                                        <th>LUNCH</th>
                                                        <th>DINNER</th>
                                                        <th>DATE</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody id="tableadd_personal_meal_popup">
                                                    {% for row in personal_meals %}
                                                        {% if row.week.pk == week.pk %}
                                                            <tr>
                                                                <td><input type="text" class="form-control numberinput"
                                                                           name="personal_breakfast" id="personal_breakfast_{{ row.day_of_week }}_saved_{{ week.pk }}"

                                                                        {% if row.personal_breakfast != None %}
                                                                           value="{{ row.personal_breakfast }}"
                                                                        {% endif %}
                                                                           maxlength="6"
                                                                ></td>
                                                                <td><input type="text" class="form-control numberinput"
                                                                           name="personal_lunch"
                                                                           id="personal_lunch_{{ row.day_of_week }}_saved_{{ week.pk }}"
                                                                           value="{{ row.personal_lunch }}"
                                                                           maxlength="6"
                                                                ></td>
                                                                <td><input type="text" class="form-control numberinput"
                                                                           maxlength="6"
                                                                           name="personal_dinner"
                                                                           id="personal_dinner_{{ row.day_of_week }}_saved_{{ week.pk }}"
                                                                           value="{{ row.personal_dinner }}"
                                                                ></td>
                                                                <td colspan="1"><input type="date" readonly="readonly" width="48"
                                                                                       class="form-control"
                                                                                       name="personal_meal_date"
                                                                                       maxlength="6"
                                                                                       value="{{ row.date|date:"Y-m-d" }}"
                                                                                       id="personal_meal_date_{{ row.day_of_week }}_saved_{{ week.pk }}"></td>
                                                            </tr>
                                                        {% endif %}
                                                    {% endfor %}
                                                    <tr>
                                                        <td colspan="3">
                                                            <b>-OR-</b>
                                                        </td>
                                                    </tr>

                                                    {% for diem in personal_meal_perdiems %}
                                                        {% if diem.week.pk == week.pk %}
                                                            <tr>
                                                                <td>
                                                            <span class="input-group-text"
                                                                  id="basic-addon1">Per Diem Day {{ diem.day_of_week|add:"1" }}:</span>

                                                                </td>
                                                                <td colspan="2">
                                                                    <input class="multisteps-form__input form-control numberinput"
                                                                           id="personal_meal_perdiem_{{ diem.day_of_week }}_saved_{{ week.pk }}" name="personal_meal_perdiem"
                                                                           type="text" maxlength="6" value="{{ diem.personal_meal_perdiem }}"/>
                                                                </td>
                                                                <td>
                                                                    <input class="form-control" type="date" id="personal_meal_perdiem_date_{{ diem.day_of_week }}_saved_{{ week.pk }}"
                                                                           readonly
                                                                           name="personal_meal_perdiem_date" value="{{ diem.date|date:"Y-m-d" }}">
                                                                </td>
                                                            </tr>
                                                        {% endif %}
                                                    {% endfor %}

                                                    </tbody>
                                                    <tfoot>

                                                    <tr>
                                                        <td>
                                                            <span class="input-group-text"
                                                                  id="basic-addon1">Sub Total $:</span>

                                                        </td>
                                                        <td colspan="3">
                                                            <input class="multisteps-form__input form-control subtotal"
                                                                   id="Meal_Expense_Modal_subtotal_saved_{{ week.pk }}" name="Meal_Expense_Modal_subtotal"
                                                                   type="text" readonly/>
                                                        </td>

                                                    </tr>

                                                    </tfoot>
                                                </table>

                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-success" data-dismiss="modal">Done
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        {% endif %}
                    </div>
                    <!--========================================================================================Modal for Hotel======================================================-->
                    <div id="hotel_popups">
                        {% if hotel_weeks == None %}
                            <div class="modal fade" id="Hotel_Expense_Modal_unsaved_0" tabindex="-1" role="dialog"
                                 aria-labelledby="ModalCenterTitle" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="exampleModalLongTitle">Week Hotel
                                                Expense</h5>
                                            <button type="button" class="close" data-dismiss="modal"
                                                    aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            <table class="table" id="expense_meal_table">
                                                <thead>
                                                <tr>
                                                    <th>HOTEL ROOM CHARGE</th>
                                                    <th>LAUNDRY</th>
                                                    <th>TELEPHONE</th>
                                                    <th>OTHERS</th>
                                                    <th>DATE</th>
                                                </tr>
                                                </thead>
                                                <tbody id="tableadd_expense_hotel_popup">
                                                {% for day in days_of_the_week %}
                                                    <tr>
                                                        <td><input type="text" name="hotel_room_change"
                                                                   class="form-control numberinput" maxlength="6" id="hotel_room_change_{{ day }}_unsaved_0"
                                                        ></td>
                                                        <td><input type="text" name="hotel_laundry"
                                                                   class="form-control numberinput" maxlength="6" id="hotel_laundry_{{ day }}_unsaved_0"
                                                        ></td>
                                                        <td><input type="text" name="hotel_telephone"
                                                                   class="form-control numberinput" maxlength="6" id="hotel_telephone_{{ day }}_unsaved_0"
                                                        ></td>
                                                        <td><input type="text" name="hotel_others"
                                                                   class="form-control numberinput" maxlength="6" id="hotel_others_{{ day }}_unsaved_0"
                                                        ></td>
                                                        <td colspan="1"><input name="hotel_date" type="date" width="48"
                                                                               class="form-control" id="hotel_date_{{ day }}_unsaved_0" readonly>
                                                        </td>
                                                    </tr>
                                                {% endfor %}
                                                </tbody>
                                                <tfoot>
                                                <tr>
                                                    <td>
                                                            <span class="input-group-text"
                                                                  id="basic-addon1">Sub Total $:</span>

                                                    </td>
                                                    <td colspan="2">
                                                        <input class="multisteps-form__input form-control subtotal"
                                                               id="Hotel_Expense_Modal_subtotal_unsaved_0" name="Hotel_Expense_Modal_subtotal"
                                                               type="text" readonly/>
                                                    </td>
                                                    </td>


                                                </tr>

                                                </tfoot>
                                            </table>


                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-success" data-dismiss="modal">Done
                                            </button>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        {% else %}
                            {% for week in hotel_weeks %}
                                <div class="modal fade" id="Hotel_Expense_Modal_saved_{{ week.pk }}" tabindex="-1" role="dialog"
                                     aria-labelledby="ModalCenterTitle" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h5 class="modal-title" id="exampleModalLongTitle">Week Hotel
                                                    Expense</h5>
                                                <button type="button" class="close" data-dismiss="modal"
                                                        aria-label="Close">
                                                    <span aria-hidden="true">&times;</span>
                                                </button>
                                            </div>
                                            <div class="modal-body">
                                                <table class="table" id="expense_meal_table">
                                                    <thead>
                                                    <tr>
                                                        <th>HOTEL ROOM CHARGE</th>
                                                        <th>LAUNDRY</th>
                                                        <th>TELEPHONE</th>
                                                        <th>OTHERS</th>
                                                        <th>DATE</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody id="tableadd_expense_hotel_popup">
                                                    {% for row in hotel_expenses %}
                                                        {% if row.week.pk == week.pk %}
                                                            <tr>
                                                                <td><input type="text" name="hotel_room_change" maxlength="6"
                                                                           class="form-control numberinput" value="{{ row.hotel_room_change }}" id="hotel_room_change_{{ row.day_of_week }}_saved_{{ week.pk }}"
                                                                ></td>
                                                                <td><input type="text" name="hotel_laundry" maxlength="6"
                                                                           class="form-control numberinput" value="{{ row.hotel_laundry }}" id="hotel_laundry_{{ row.day_of_week }}_saved_{{ week.pk }}"
                                                                ></td>
                                                                <td><input type="text" name="hotel_telephone" maxlength="6"
                                                                           class="form-control numberinput" value="{{ row.hotel_telephone }}" id="hotel_telephone_{{ row.day_of_week }}_saved_{{ week.pk }}"
                                                                ></td>
                                                                <td><input type="text" name="hotel_others" maxlength="6"
                                                                           class="form-control numberinput" value="{{ row.hotel_others }}" id="hotel_others_{{ row.day_of_week }}_saved_{{ week.pk }}"
                                                                ></td>
                                                                <td colspan="1"><input name="hotel_date" type="date" width="48" value="{{ row.date|date:"Y-m-d" }}" maxlength="6"
                                                                                       class="form-control" id="hotel_date_{{ row.day_of_week }}_saved_{{ week.pk }}" readonly>
                                                                </td>
                                                            </tr>
                                                        {% endif %}
                                                    {% endfor %}
                                                    </tbody>
                                                    <tfoot>
                                                    <tr>
                                                        <td>
                                                            <span class="input-group-text"
                                                                  id="basic-addon1">Sub Total $:</span>

                                                        </td>
                                                        <td colspan="2">
                                                            <input class="multisteps-form__input form-control subtotal"
                                                                   id="Hotel_Expense_Modal_subtotal_saved_{{ week.pk }}" name="Hotel_Expense_Modal_subtotal"
                                                                   type="text" readonly/>
                                                        </td>
                                                        </td>


                                                    </tr>

                                                    </tfoot>
                                                </table>


                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-success" data-dismiss="modal">Done
                                                </button>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        {% endif %}

                    </div>
                    <!--========================================================================================Modal for Transportation==================================================================-->

                    <div id="transportation_popups">
                        {% if transportation_weeks == None %}
                            <div class="modal fade" id="Transportation_Expense_Modal_unsaved_0" tabindex="-1" role="dialog"
                                 aria-labelledby="ModalCenterTitle" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="exampleModalLongTitle">Week Transportation
                                                Expense</h5>
                                            <button type="button" class="close" data-dismiss="modal"
                                                    aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            <table class="table" id="expense_transportation_table">
                                                <thead>
                                                <tr>
                                                    <th>PARKING</th>
                                                    <th>TOLLS</th>
                                                    <th>RIDES</th>
                                                    <th>OTHERS</th>
                                                    <th>DATE</th>
                                                </tr>
                                                </thead>
                                                <tbody id="tableadd_expense_transportation_popup">
                                                {% for day in days_of_the_week %}
                                                    <tr>
                                                        <td><input type="text" class="form-control numberinput" id="parking_{{ day }}_unsaved_0"
                                                                   name="parking"  maxlength="6"></td>
                                                        <td><input type="text" class="form-control numberinput" id="tolls_{{ day }}_unsaved_0"
                                                                   name="tolls"  maxlength="6"></td>
                                                        <td><input type="text" class="form-control numberinput" id="rides_{{ day }}_unsaved_0"
                                                                   name="rides"  maxlength="6"></td>
                                                        <td><input type="text" class="form-control numberinput"
                                                                   id="transportation_others_{{ day }}_unsaved_0"
                                                                   name="transportation_others"
                                                                   maxlength="6"></td>
                                                        <td colspan="1"><input type="date" width="48"
                                                                               class="form-control"
                                                                               name="transportation_date"
                                                                               id="transportation_date_{{ day }}_unsaved_0" readonly></td>
                                                    </tr>
                                                {% endfor %}

                                                </tbody>
                                                <tfoot>
                                                <tr>
                                                    <td>
                                                            <span class="input-group-text"
                                                                  id="basic-addon1">Sub Total $:</span>

                                                    </td>
                                                    <td colspan="4">
                                                        <input class="multisteps-form__input form-control subtotal"
                                                               id="Transportation_Expense_Modal_subtotal_unsaved_0" name="Transportation_Expense_Modal_subtotal"
                                                               type="text" readonly/>
                                                    </td>

                                                    </td>


                                                </tr>

                                                </tfoot>
                                            </table>


                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-success" data-dismiss="modal">Done
                                            </button>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        {% else %}
                            {% for week in transportation_weeks %}
                                <div class="modal fade" id="Transportation_Expense_Modal_saved_{{ week.pk }}" tabindex="-1" role="dialog"
                                     aria-labelledby="ModalCenterTitle" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h5 class="modal-title" id="exampleModalLongTitle">Week Transportation
                                                    Expense</h5>
                                                <button type="button" class="close" data-dismiss="modal"
                                                        aria-label="Close">
                                                    <span aria-hidden="true">&times;</span>
                                                </button>
                                            </div>
                                            <div class="modal-body">
                                                <table class="table" id="expense_transportation_table">
                                                    <thead>
                                                    <tr>
                                                        <th>PARKING</th>
                                                        <th>TOLLS</th>
                                                        <th>RIDES</th>
                                                        <th>OTHERS</th>
                                                        <th>DATE</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody id="tableadd_expense_transportation_popup">
                                                    {% for row in transportation_expenses %}
                                                        {% if row.week.pk == week.pk %}
                                                            <tr>
                                                                <td><input maxlength="6" type="text" class="form-control numberinput" value="{{ row.parking }}" id="parking_{{ row.day_of_week }}_saved_{{ week.pk }}"
                                                                           name="parking" ></td>
                                                                <td><input maxlength="6" type="text" class="form-control numberinput" value="{{ row.tolls }}" id="tolls_{{ row.day_of_week }}_saved_{{ week.pk }}"
                                                                           name="tolls" ></td>
                                                                <td><input maxlength="6" type="text" class="form-control numberinput" value="{{ row.rides }}" id="rides_{{ row.day_of_week }}_saved_{{ week.pk }}"
                                                                           name="rides" ></td>
                                                                <td><input maxlength="6" type="text" class="form-control numberinput" value="{{ row.transportation_others }}"
                                                                           id="transportation_others_{{ row.day_of_week }}_saved_{{ week.pk }}"
                                                                           name="transportation_others"
                                                                ></td>
                                                                <td colspan="1"><input type="date" width="48"
                                                                                       class="form-control"
                                                                                       name="transportation_date"
                                                                                       value="{{ row.date|date:"Y-m-d" }}"
                                                                                       id="transportation_date_{{ row.day_of_week }}_saved_{{ week.pk }}" readonly></td>
                                                            </tr>
                                                        {% endif %}
                                                    {% endfor %}

                                                    </tbody>
                                                    <tfoot>
                                                    <tr>
                                                        <td>
                                                            <span class="input-group-text"
                                                                  id="basic-addon1">Sub Total $:</span>

                                                        </td>
                                                        <td colspan="4">
                                                            <input class="multisteps-form__input form-control subtotal"
                                                                   id="Transportation_Expense_Modal_subtotal_saved_{{ week.pk }}" name="Transportation_Expense_Modal_subtotal"
                                                                   type="text" readonly/>
                                                        </td>

                                                        </td>


                                                    </tr>

                                                    </tfoot>
                                                </table>


                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-success" data-dismiss="modal">Done
                                                </button>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        {% endif %}
                    </div>
                    <!--========================================================================================Modal for Business Meal==================================================================-->

                    <div id="business_meal_popups">
                        {% if b_meal_weeks == None %}
                            <div class="modal fade" id="BusinessMeal_Expense_Modal_unsaved_0" tabindex="-1" role="dialog"
                                 aria-labelledby="ModalCenterTitle" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="exampleModalLongTitle">Business Meal
                                                Expense Week</h5>
                                            <button type="button" class="close" data-dismiss="modal"
                                                    aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            <table class="table" id="business_expense_meal_table">
                                                <thead>
                                                <tr>
                                                    <th>BREAKFAST</th>
                                                    <th>LUNCH</th>
                                                    <th>DINNER</th>
                                                    <th>DATE</th>
                                                </tr>
                                                </thead>
                                                <tbody id="tableadd_business_meal_popup">
                                                {% for day in days_of_the_week %}
                                                    <tr>

                                                        <td><input maxlength="6" type="text" class="form-control numberinput"
                                                                   name="business_breakfast" id="business_breakfast_{{ day }}_unsaved_0"
                                                        ></td>
                                                        <td><input maxlength="6" type="text" class="form-control numberinput"
                                                                   name="business_lunch"
                                                                   id="business_lunch_{{ day }}_unsaved_0" ></td>
                                                        <td><input maxlength="6" type="text" class="form-control numberinput"
                                                                   name="business_dinner"
                                                                   id="business_dinner_{{ day }}_unsaved_0" ></td>
                                                        <td colspan="1"><input type="date" width="48"
                                                                               class="form-control numberinput"
                                                                               name="business_meal_date"
                                                                               id="business_meal_date_{{ day }}_unsaved_0" readonly></td>
                                                    </tr>
                                                {% endfor %}
                                                </tbody>
                                                <tfoot>

                                                <tr>
                                                    <td>
                                                            <span class="input-group-text"
                                                                  id="basic-addon1">Sub Total $:</span>

                                                    </td>
                                                    <td colspan="3">
                                                        <input class="multisteps-form__input form-control subtotal"
                                                               id="BusinessMeal_Expense_Modal_subtotal_unsaved_0"
                                                               name="BusinessMeal_Expense_Modal_subtotal"
                                                               type="text" readonly/>
                                                    </td>

                                                </tr>

                                                </tfoot>
                                            </table>

                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-success" data-dismiss="modal">Done
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {% else %}
                            {% for week in b_meal_weeks %}
                                <div class="modal fade" id="BusinessMeal_Expense_Modal_saved_{{ week.pk }}" tabindex="-1" role="dialog"
                                     aria-labelledby="ModalCenterTitle" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h5 class="modal-title" id="exampleModalLongTitle">Business Meal
                                                    Expense Week</h5>
                                                <button type="button" class="close" data-dismiss="modal"
                                                        aria-label="Close">
                                                    <span aria-hidden="true">&times;</span>
                                                </button>
                                            </div>
                                            <div class="modal-body">
                                                <table class="table" id="business_expense_meal_table">
                                                    <thead>
                                                    <tr>
                                                        <th>BREAKFAST</th>
                                                        <th>LUNCH</th>
                                                        <th>DINNER</th>
                                                        <th>DATE</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody id="tableadd_business_meal_popup">
                                                    {% for row in business_meals %}
                                                        {% if row.week.pk == week.pk %}
                                                            <tr>
                                                                <td><input maxlength="6" type="text" class="form-control numberinput"
                                                                           name="business_breakfast" id="business_breakfast_{{ row.day_of_week }}_saved_{{ week.pk }}" value="{{ row.business_breakfast }}"
                                                                ></td>
                                                                <td><input maxlength="6" type="text" class="form-control numberinput"
                                                                           name="business_lunch" value="{{ row.business_lunch }}"
                                                                           id="business_lunch_{{ row.day_of_week }}_saved_{{ week.pk }}" ></td>
                                                                <td><input maxlength="6" type="text" class="form-control numberinput"
                                                                           name="business_dinner" value="{{ row.business_dinner }}"
                                                                           id="business_dinner_{{ row.day_of_week }}_saved_{{ week.pk }}" ></td>
                                                                <td colspan="1"><input type="date" width="48"
                                                                                       class="form-control"
                                                                                       name="business_meal_date" value="{{ row.date|date:"Y-m-d" }}"
                                                                                       id="business_meal_date_{{ row.day_of_week }}_saved_{{ week.pk }}" readonly></td>
                                                            </tr>
                                                        {% endif %}
                                                    {% endfor %}
                                                    </tbody>
                                                    <tfoot>

                                                    <tr>
                                                        <td>
                                                            <span class="input-group-text"
                                                                  id="basic-addon1">Sub Total $:</span>

                                                        </td>
                                                        <td colspan="3">
                                                            <input class="multisteps-form__input form-control subtotal"
                                                                   id="BusinessMeal_Expense_Modal_subtotal_saved_{{ week.pk }}"
                                                                   name="BusinessMeal_Expense_Modal_subtotal"
                                                                   type="text" readonly/>
                                                        </td>

                                                    </tr>

                                                    </tfoot>
                                                </table>

                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-success" data-dismiss="modal">Done
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        {% endif %}

                    </div>
                    <!--========================================================================================Modal for Other Expense==================================================================-->

                    <div id="other_popups">
                        {% if other_weeks == None %}
                            <div class="modal fade" id="Others_Expense_Modal_unsaved_0" tabindex="-1" role="dialog"
                                 aria-labelledby="ModalCenterTitle" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="exampleModalLongTitle"> Others
                                                Expense Week</h5>
                                            <button type="button" class="close" data-dismiss="modal"
                                                    aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            <table class="table" id="others_table">
                                                <thead>
                                                <tr>
                                                    <th>TELEPHONE OR FAX</th>
                                                    <th>GIFT/ENTERTAINMENT</th>
                                                    <th>MISCELLANEOUS</th>
                                                    <th>DATE</th>
                                                </tr>
                                                </thead>
                                                <tbody id="tableadd_others_popup">
                                                {% for day in days_of_the_week %}
                                                    <tr>
                                                        <td><input maxlength="6" type="text" class="form-control numberinput"
                                                                   id="others_telephone_{{ day }}_unsaved_0" name="others_telephone"
                                                        ></td>
                                                        <td><input maxlength="6" type="text" class="form-control numberinput"
                                                                   id="others_gift_{{ day }}_unsaved_0"
                                                                   name="others_gift" ></td>
                                                        <td><input maxlength="6" type="text" class="form-control numberinput"
                                                                   id="others_misc_{{ day }}_unsaved_0"
                                                                   name="others_misc" ></td>
                                                        <td colspan="1"><input type="date" width="48"
                                                                               class="form-control"
                                                                               name="others_date"
                                                                               id="others_date_{{ day }}_unsaved_0" readonly></td>
                                                    </tr>
                                                {% endfor %}
                                                </tbody>
                                                <tfoot>

                                                <tr>
                                                    <td>
                                                            <span class="input-group-text"
                                                                  id="basic-addon1">Sub Total $:</span>

                                                    </td>
                                                    <td colspan="3">
                                                        <input class="multisteps-form__input form-control subtotal"
                                                               id="Others_Expense_Modal_subtotal_unsaved_0"
                                                               name="Others_Expense_Modal_subtotal"
                                                               type="text" readonly/>
                                                    </td>

                                                </tr>

                                                </tfoot>
                                            </table>

                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-success" data-dismiss="modal">Done
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {% else %}
                            {% for week in other_weeks %}
                                <div class="modal fade" id="Others_Expense_Modal_saved_{{ week.pk }}" tabindex="-1" role="dialog"
                                     aria-labelledby="ModalCenterTitle" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h5 class="modal-title" id="exampleModalLongTitle"> Others
                                                    Expense Week</h5>
                                                <button type="button" class="close" data-dismiss="modal"
                                                        aria-label="Close">
                                                    <span aria-hidden="true">&times;</span>
                                                </button>
                                            </div>
                                            <div class="modal-body">
                                                <table class="table" id="others_table">
                                                    <thead>
                                                    <tr>
                                                        <th>TELEPHONE OR FAX</th>
                                                        <th>GIFT/ENTERTAINMENT</th>
                                                        <th>MISCELLANEOUS</th>
                                                        <th>DATE</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody id="tableadd_others_popup">
                                                    {% for row in other_expenses %}
                                                        {% if row.week.pk == week.pk %}
                                                            <tr>
                                                                <td><input maxlength="6" type="text" class="form-control numberinput"
                                                                           id="others_telephone_{{ row.day_of_week }}_saved_{{ week.pk }}" name="others_telephone"
                                                                           value="{{ row.others_telephone }}"></td>
                                                                <td><input maxlength="6" type="text" class="form-control numberinput"
                                                                           id="others_gift_{{ row.day_of_week }}_saved_{{ week.pk }}" value="{{ row.others_gift }}"
                                                                           name="others_gift" ></td>
                                                                <td><input maxlength="6" type="text" class="form-control numberinput" value="{{ row.others_misc }}"
                                                                           id="others_misc_{{ row.day_of_week }}_saved_{{ week.pk }}"
                                                                           name="others_misc" ></td>
                                                                <td colspan="1"><input type="date" width="48"
                                                                                       class="form-control"
                                                                                       name="others_date" value="{{ row.date|date:"Y-m-d" }}"
                                                                                       id="others_date_{{ row.day_of_week }}_saved_{{ week.pk }}" readonly></td>
                                                            </tr>
                                                        {% endif %}
                                                    {% endfor %}

                                                    </tbody>
                                                    <tfoot>

                                                    <tr>
                                                        <td>
                                                            <span class="input-group-text"
                                                                  id="basic-addon1">Sub Total $:</span>

                                                        </td>
                                                        <td colspan="3">
                                                            <input class="multisteps-form__input form-control subtotal"
                                                                   id="Others_Expense_Modal_subtotal_saved_{{ week.pk }}"
                                                                   name="Others_Expense_Modal_subtotal"
                                                                   type="text" readonly/>
                                                        </td>

                                                    </tr>

                                                    </tfoot>
                                                </table>

                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-success" data-dismiss="modal">Done
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        {% endif %}
                    </div>
                    <!--============================================================Modal For Business Expense Explanation=====================================================================-->

                    {% if forms_BEExplanations == None %}
                        <div class="modal fade" id="Bee_Modal_unsaved_0" tabindex="-1" role="dialog"
                             aria-labelledby="ModalCenterTitle" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="exampleModalLongTitle">Business Expense
                                            Explaination </h5>
                                        <button type="button" class="close" data-dismiss="modal"
                                                aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <div class="card col-12">
                                            <h5 class="card-header" style="background: #2b5797; color: #ffffff">
                                                Expense Explaination
                                            </h5>
                                            <div class="card-body ">

                                                <table class="table" id="business_expense_explaination_unsaved_0">

                                                    <tbody id="tableadd_business_expense_popup_unsaved_0">
                                                    <tr>
                                                        <td>
                                                                <span class="input-group-text numberinput"
                                                                      id="basic-addon1">Amount:</span>
                                                        </td>
                                                        <td>
                                                            <input type="text" class="form-control "
                                                                   name="business_expense_amount"
                                                                   maxlength="6"
                                                                   id="business_expense_amount_unsaved_0"
                                                            ></td>
                                                        </td>
                                                        <td>
                                                                <span class="input-group-text"
                                                                      id="basic-addon1">Place:</span>
                                                        </td>

                                                        <td>
                                                            <input type="text" class="form-control "
                                                                   maxlength="200"
                                                                   id="business_expense_place_unsaved_0"
                                                                   name="business_expense_place"
                                                                   placeholder="Place"></td>
                                                        </td>
                                                    </tr>


                                                    <tr>
                                                        <td>
                                                            <span class="input-group-text" id="basic-addon1">Purpose:</span>
                                                        </td>


                                                        <td colspan="3">
                                                                <textarea class="form-control subtotal "
                                                                          maxlength="200"
                                                                          id="business_expense_purpose_unsaved_0"
                                                                          name="business_expense_purpose"
                                                                          placeholder="Please state Purpose" onchange="update_purpose('_unsaved_0')"></textarea>

                                                        </td>
                                                    </tr>


                                                    <tr>
                                                        <td>
                                                                <span class="input-group-text"
                                                                      id="basic-addon1">Detail:</span>
                                                        </td>


                                                        <td colspan="3">
                                                                <textarea class="form-control "
                                                                          id="business_expense_detail_unsaved_0"
                                                                          maxlength="200"
                                                                          name="business_expense_detail"
                                                                          placeholder="Please state Detail"></textarea>

                                                        </td>
                                                    </tr>


                                                    </tbody>
                                                    <tfoot>
                                                    <tr>
                                                        <td>
                                                            <span class="input-group-text" id="basic-addon1">Counter Party :</span>
                                                        </td>
                                                        <td colspan="4">
                                                            <input type="text" class="form-control "
                                                                   id="business_expense_counterparty_unsaved_0"
                                                                   maxlength="200"
                                                                   name="business_expense_counterparty"
                                                                   placeholder="Counter Party"></td>
                                                    </tr>

                                                    <tr>
                                                        <td>
                                                                <span class="input-group-text"
                                                                      id="basic-addon1">Name:</span>
                                                        </td>
                                                        <td>
                                                            <input type="text" class="form-control " id="business_expense_name_unsaved_0"
                                                                   maxlength="70"
                                                                   name="business_expense_name"
                                                                   placeholder="Name">
                                                        </td>
                                                        </td>
                                                        <td>
                                                                <span class="input-group-text"
                                                                      id="basic-addon1">Title:</span>
                                                        </td>

                                                        <td>
                                                            <input type="text" class="form-control " id="business_expense_title_unsaved_0"
                                                                   name="business_expense_title" maxlength="30"
                                                                   placeholder="Title"></td>
                                                        </td>
                                                    </tr>

                                                    </tfoot>
                                                </table>
                                            </div>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary"
                                                    data-dismiss="modal">
                                                Close
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% else %}
                        {% for bee in forms_BEExplanations %}
                            <div class="modal fade" id="Bee_Modal_saved_{{bee.pk}}" tabindex="-1" role="dialog"
                                 aria-labelledby="ModalCenterTitle" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="exampleModalLongTitle">Business Expense
                                                Explaination </h5>
                                            <button type="button" class="close" data-dismiss="modal"
                                                    aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            <div class="card col-12">
                                                <h5 class="card-header" style="background: #2b5797; color: #ffffff">
                                                    Expense Explaination
                                                </h5>
                                                <div class="card-body ">

                                                    <table class="table" id="business_expense_explaination_saved_{{ bee.pk }}">

                                                        <tbody id="tableadd_business_expense_popup_saved_{{ bee.pk }}">
                                                        <tr>
                                                            <td>
                                                                <span class="input-group-text"
                                                                      id="basic-addon1">Amount:</span>
                                                            </td>
                                                            <td>
                                                                <input type="text" class="form-control numberinput "
                                                                       name="business_expense_amount"
                                                                       maxlength="6"
                                                                       id="business_expense_amount_saved_{{ bee.pk }}"

                                                                        {% if bee.amount != None %}
                                                                       value="{{ bee.amount }}"
                                                                        {% endif %}
                                                                ></td>
                                                            </td>
                                                            <td>
                                                                <span class="input-group-text"
                                                                      id="basic-addon1">Place:</span>
                                                            </td>

                                                            <td>
                                                                <input type="text" class="form-control "
                                                                       id="business_expense_place_saved_{{ bee.pk }}"
                                                                       maxlength="200"
                                                                       name="business_expense_place"
                                                                       placeholder="Place"
                                                                        {% if bee.place != None %}
                                                                       value="{{ bee.place }}"
                                                                        {% endif %}
                                                                ></td>
                                                            </td>
                                                        </tr>


                                                        <tr>
                                                            <td>
                                                                <span class="input-group-text" id="basic-addon1">Purpose:</span>
                                                            </td>


                                                            <td colspan="3">
                                                                <textarea class="form-control subtotal "
                                                                          id="business_expense_purpose_saved_{{ bee.pk }}"
                                                                          maxlength="200"
                                                                          name="business_expense_purpose"
                                                                          placeholder="Please state Purpose" onchange="update_purpose('_saved_{{ bee.pk }}')">{% if bee.purpose != None %}{{bee.purpose}}{%endif%}</textarea>

                                                            </td>
                                                        </tr>


                                                        <tr>
                                                            <td>
                                                                <span class="input-group-text"
                                                                      id="basic-addon1">Detail:</span>
                                                            </td>


                                                            <td colspan="3">
                                                                <textarea class="form-control "
                                                                          maxlength="200"
                                                                          id="business_expense_detail_saved_{{ bee.pk }}"
                                                                          name="business_expense_detail"
                                                                          placeholder="Please state Detail">{%if bee.detail != None%}{{bee.detail}}{%endif%}</textarea>

                                                            </td>
                                                        </tr>


                                                        </tbody>
                                                        <tfoot>
                                                        <tr>
                                                            <td>
                                                                <span class="input-group-text" id="basic-addon1">Counter Party :</span>
                                                            </td>
                                                            <td colspan="4">
                                                                <input type="text" class="form-control "
                                                                       maxlength="200"
                                                                       id="business_expense_counterparty_saved_{{ bee.pk }}"
                                                                       name="business_expense_counterparty"
                                                                       placeholder="Counter Party"
                                                                        {% if bee.counterParty != None %}
                                                                       value="{{ bee.counterParty }}"
                                                                        {% endif %}
                                                                ></td>
                                                        </tr>

                                                        <tr>
                                                            <td>
                                                                <span class="input-group-text"
                                                                      id="basic-addon1">Name:</span>
                                                            </td>
                                                            <td>
                                                                <input type="text" class="form-control " id="business_expense_name_saved_{{ bee.pk }}"
                                                                       name="business_expense_name"
                                                                       maxlength="70"
                                                                       placeholder="Name"
                                                                        {% if bee.name != None %}
                                                                       value="{{ bee.name }}"
                                                                        {% endif %}
                                                                >
                                                            </td>
                                                            </td>
                                                            <td>
                                                                <span class="input-group-text"
                                                                      id="basic-addon1">Title:</span>
                                                            </td>

                                                            <td>
                                                                <input type="text" class="form-control" id="business_expense_title_saved_{{ bee.pk }}"
                                                                       name="business_expense_title"
                                                                       maxlength="30"
                                                                       placeholder="Title"
                                                                        {% if bee.title != None %}
                                                                       value="{{ bee.title }}"
                                                                        {% endif %}
                                                                ></td>
                                                            </td>
                                                        </tr>

                                                        </tfoot>
                                                    </table>
                                                </div>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary"
                                                        data-dismiss="modal">
                                                    Close
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        {% endfor %}
                    {% endif %}

                    <!--========================================================================================Modal for Expenditure ==================================================================-->

                    <div id="expenditure_popups">
                        {% if expenditure_weeks == None %}
                            <div class="modal fade" id="Expenditure_Expense_Modal_unsaved_0" tabindex="-1" role="dialog"
                                 aria-labelledby="ModalCenterTitle" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="exampleModalLongTitle"> Expenditure Charged
                                                To the Company</h5>
                                            <button type="button" class="close" data-dismiss="modal"
                                                    aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            <table class="table" id="expenditure_table">
                                                <thead>
                                                <tr>
                                                    <th>AIRLINE FARE</th>
                                                    <th>HOTEL</th>
                                                    <th>AUTO RENTALS</th>
                                                    <th>OTHERS</th>
                                                    <th>DATE</th>
                                                </tr>
                                                </thead>
                                                <tbody id="tableadd_expenditure_popup">
                                                {% for day in days_of_the_week %}
                                                    <tr>
                                                        <td><input type="text" class="form-control numberinput"
                                                                   id="expenditure_airfare_{{ day }}_unsaved_0" name="expenditure_airfare"
                                                        ></td>
                                                        <td><input type="text" class="form-control numberinput"
                                                                   id="expenditure_hotel_{{ day }}_unsaved_0"
                                                                   name="expenditure_hotel" ></td>
                                                        <td><input type="text" class="form-control numberinput"
                                                                   id="expenditure_autorental_{{ day }}_unsaved_0"
                                                                   name="expenditure_autorental" ></td>
                                                        <td><input type="text" class="form-control numberinput"
                                                                   id="expenditure_other_{{ day }}_unsaved_0"
                                                                   name="expenditure_other" ></td>
                                                        <td colspan="1"><input type="date" width="48"
                                                                               class="form-control"
                                                                               name="expenditure_date"
                                                                               id="expenditure_date_{{ day }}_unsaved_0" readonly></td>
                                                    </tr>
                                                {% endfor %}

                                                </tbody>
                                                <tfoot>

                                                <tr>
                                                    <td>
                                                            <span class="input-group-text"
                                                                  id="basic-addon1">Sub Total $:</span>

                                                    </td>
                                                    <td colspan="4">
                                                        <input class="multisteps-form__input form-control numberinput subtotal"
                                                               id="Expenditure_Expense_Modal_subtotal_unsaved_0"
                                                               name="Expenditure_Expense_Modal_subtotal"
                                                               type="text" readonly/>
                                                    </td>

                                                </tr>

                                                </tfoot>
                                            </table>

                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-success" data-dismiss="modal">Done
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {% else %}
                            {% for week in expenditure_weeks %}
                                <div class="modal fade" id="Expenditure_Expense_Modal_saved_{{ week.pk }}" tabindex="-1" role="dialog"
                                     aria-labelledby="ModalCenterTitle" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h5 class="modal-title" id="exampleModalLongTitle"> Expenditure Charged
                                                    To the Company</h5>
                                                <button type="button" class="close" data-dismiss="modal"
                                                        aria-label="Close">
                                                    <span aria-hidden="true">&times;</span>
                                                </button>
                                            </div>
                                            <div class="modal-body">
                                                <table class="table" id="expenditure_table">
                                                    <thead>
                                                    <tr>
                                                        <th>AIRLINE FARE</th>
                                                        <th>HOTEL</th>
                                                        <th>AUTO RENTALS</th>
                                                        <th>OTHERS</th>
                                                        <th>DATE</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody id="tableadd_expenditure_popup">
                                                    {% for row in expenditures %}
                                                        {% if row.week.pk == week.pk %}
                                                            <tr>
                                                                <td><input type="text" class="form-control numberinput"
                                                                           id="expenditure_airfare_{{ row.day_of_week }}_saved_{{ week.pk }}" name="expenditure_airfare"
                                                                           value="{{ row.expenditure_airfare }}"></td>
                                                                <td><input type="text" class="form-control numberinput"
                                                                           id="expenditure_hotel_{{ row.day_of_week }}_saved_{{ week.pk }}"
                                                                           name="expenditure_hotel"  value="{{ row.expenditure_hotel }}"></td>
                                                                <td><input type="text" class="form-control numberinput"
                                                                           id="expenditure_autorental_{{ row.day_of_week }}_saved_{{ week.pk }}"
                                                                           name="expenditure_autorental"  value="{{ row.expenditure_autorental }}"></td>
                                                                <td><input type="text" class="form-control numberinput"
                                                                           id="expenditure_other_{{ row.day_of_week }}_saved_{{ week.pk }}"
                                                                           name="expenditure_other"  value="{{ row.expenditure_other }}"></td>
                                                                <td colspan="1"><input type="date" width="48"
                                                                                       class="form-control"
                                                                                       name="expenditure_date" value="{{ row.date|date:"Y-m-d" }}"
                                                                                       id="expenditure_date_{{ row.day_of_week }}_saved_{{ week.pk }}" readonly></td>
                                                            </tr>
                                                        {% endif %}
                                                    {% endfor %}

                                                    </tbody>
                                                    <tfoot>

                                                    <tr>
                                                        <td>
                                                            <span class="input-group-text"
                                                                  id="basic-addon1">Sub Total $:</span>

                                                        </td>
                                                        <td colspan="4">
                                                            <input class="multisteps-form__input form-control subtotal"
                                                                   id="Expenditure_Expense_Modal_subtotal_saved_{{week.pk}}"
                                                                   name="Expenditure_Expense_Modal_subtotal"
                                                                   type="text" readonly/>
                                                        </td>

                                                    </tr>

                                                    </tfoot>
                                                </table>

                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-success" data-dismiss="modal">Done
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        {% endif %}
                    </div>
                    </form>


                </div>
            </div>
        </div>
    </div>

    <div id="modified_fields">
        {% for field in modified_fields %}
            <input name="{{ field.fieldID }}" value="{{ field.fieldData }}" class="modified_fields" hidden readonly>
        {% endfor %}
    </div>

    <!--this links to the local javascript-->
    <script src="{% static 'travel/js/script.js' %}"></script>
    <script type="text/javascript" src="{% static 'travel/js/countries.js' %}"></script>
    <script type="text/javascript" src="{% static 'travel/js/create_popups_corrina.js' %}"></script>
    <script type="text/javascript" src="{% static 'travel/js/form_edit_control.js' %}"></script>
    <script type="text/javascript" src="{% static 'travel/js/ta_and_tr_shared.js' %}"></script>
    <!--this javascript calls the bootstrap library javascript-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/js/bootstrap.bundle.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <!--Moments Js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.26.0/moment-with-locales.min.js"></script>
    <!-- JS that used to be written in this file but was moved to ta js file to make it load faster -->
    <script src="{% static 'travel/js/tr_scripts.js' %}"></script>
    <script src="{% static 'travel/js/tr_validation.js' %}"></script>
    <!-- sweet alert -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@7.12.15/dist/sweetalert2.all.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootbox.js/5.4.0/bootbox.min.js"></script>
    <!--Emoji Js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/emojionearea/3.4.2/emojionearea.js"></script>


    <!-- These functions are called on load of the page --->
    <script>
        {% if form_is_being_shown_to_approver %} initialize_readonly_function({% if form_is_being_approved and request.session.department == 'Supporting - Accounting' %}true{% else %}false{% endif %}); {% endif %}
    </script>

    <script>
        {% if tr_advance == None and travel_adv_exists %}
            get_tr_advance_values('{{ travel_advance.headText }}', '{{ SAP_travel.invoiceNumber }}', '{{ travel_advance.assignment }}',
                '{{ travel_advance.text }}', '{{ cost_center_desc }}', '{{ ta_doc_num }}',
                '{{ travel_advance.vendorCode }}', '{{ SAP_adv.currency }}', '{{ travel_app.budgetSourceCode }}',
                '{{ travel_advance.advAmount }}', '{{ travel_advance.companyCode }}');
        {% endif %}
        removeNone();
        limitInput();
        set_up_sum_calculations();
        get_sum();
        populateCountries("country", "state"); // first parameter is id of country drop-down and second parameter is id of state drop-down
        populateCountries("country2", "state2");

        // Some scripts/functions need to stay on the TR because I needed to use template language with them.
        function check_weeks(is_submitting){
            var submit_input = document.getElementById('submit_button');
            if (is_submitting === false){
                submit_input.value = 'Save';
            }
            else{
                submit_input.value = 'Submit';
            }
            console.log("checking if anything is bad");
            var names_to_check = ['week_begin', 'meal_week_start', 'hotel_week_start', 'transportation_week_start',
                'businessmeal_week_start', 'others_week_start', 'expenditure_week_start'];
            var what_to_fix = 'There are still some things you need to fill out: \n\n';
            var dates_unfilled = false;
            var dates_to_fix_list = "";
            for (let j = 0; j < names_to_check.length; j++) {
                var fields_with_same_name = document.getElementsByName(names_to_check[j]);
                for (let k = 0; k < fields_with_same_name.length; k++) {
                    if (fields_with_same_name[k].value === 'None' || fields_with_same_name[k].value === '' || fields_with_same_name[k].value === 'NaN-NaN-NaN' || fields_with_same_name[k].value === ''){


                        dates_unfilled = true;
                        var section = "";
                        if (j === 0){
                            section="-Mileage Expenses";
                        }
                        else if (j===1){
                            section="-Personal Meal Expenses";
                        }
                        else if (j===2){
                            section="-Hotel Expenses";
                        }
                        else if (j===3){
                            section="-Transportation Expenses";
                        }
                        else if (j===4){
                            section="-Business Meal Expenses";
                        }
                        else if (j===5){
                            section="-Other Expenses";
                        }
                        else if (j===6){
                            section="-Expenditures Charged to Company Expenses";
                        }
                        if (dates_to_fix_list.includes(section) === false){
                            dates_to_fix_list += section + "\n";
                        }

                    }
                }
            }
            if (dates_unfilled){
                dates_to_fix_list.replace("_", " ");
                what_to_fix += "There cannot be a week with an empty start date. All start dates must be filled out. \n" +
                    "These are the sections that have start dates that need to be filled:\n" + dates_to_fix_list +"Note: If you are just saving the form, the dates can be changed later.\n\n";
            }

            // IF submit button is submit:
            if(is_submitting){
                var there_are_files = false;
                // if proof of payment required make sure there is proof of payment
                if(document.getElementById("company_amount_due_file_label").innerHTML.toString().includes('Not Required') === false){
                    // check if any proof of payment have already been saved with the form:
                    {% if payment_docs == '' %}
                        there_are_files = false;
                        var payment_doc_uploads = document.getElementsByName("company_amount_due_file");
                        for (let j = 0; j < payment_doc_uploads.length; j++) {
                            if (payment_doc_uploads[j].files.length !== 0){
                                there_are_files = true;
                            }
                        }
                        if(there_are_files === false){
                            what_to_fix += "You must provide at least one document the proves that you paid your excess amount to the company.\n\n";
                        }
                    {% endif %}
                }

                // if there is anything in mileage require mileage doc
                // if mileage has number from and to are required
                if(document.getElementById("mileage_document_header").innerHTML.toString().includes('Not Required') === false){
                    {% if mileage_docs == '' %}
                        there_are_files = false;
                        var mileage_doc_uploads = document.getElementsByName("supporting_document");
                        for (let j = 0; j < mileage_doc_uploads.length; j++) {
                            if (mileage_doc_uploads[j].files.length !== 0){
                                there_are_files = true;
                            }
                        }
                        if(there_are_files === false){
                            what_to_fix += "You must provide at least one document that proves proof for your mileage.\n\n";
                        }
                    {% endif %}
                }

                // if there is anything in personal exp require personal exp
                console.log("outside personal docs");
                if(document.getElementById("personal_expense_file_label").innerHTML.toString().includes('Not Required') === false){
                    {% if personal_docs == '' or personal_docs == None %}
                        console.log("are no personal docs");
                        there_are_files = false;
                        var personal_exp_uploads = document.getElementsByName("personal_file");
                        for (let j = 0; j < personal_exp_uploads.length; j++) {
                            if (personal_exp_uploads[j].files.length !== 0){
                                there_are_files = true;
                            }
                        }
                        if(there_are_files === false){
                            what_to_fix += "You must provide at least one document that proves proof for your personal expenses.\n\n";
                        }
                    {% endif %}
                }

                // if there is anything in business exp require personal exp
                console.log("outside business docs");
                if(document.getElementById("business_expense_file_label").innerHTML.toString().includes('Not Required') === false){
                    {% if business_docs == '' or business_docs == None%}
                        console.log("are no business docs");
                        there_are_files = false;
                        var business_exp_uploads = document.getElementsByName("business_file");
                        for (let j = 0; j < business_exp_uploads.length; j++) {
                            if (business_exp_uploads[j].files.length !== 0){
                                there_are_files = true;
                            }
                        }
                        if(there_are_files === false){
                            what_to_fix += "You must provide at least one document that proves proof for your business expenses.\n\n";
                        }
                    {% endif %}
                }

                // If there is mileage, make sure that to and from are filled out
                var mileage_fields = document.getElementsByName('mileage');
                var mileage_wrong = false;
                for (let j = 0; j < mileage_fields.length; j++) {
                    var current_field = mileage_fields[j];
                    if (current_field.value !== ''){
                        var current_field_specifics = current_field.id.split('_')[current_field.id.split('_').length - 3] + "_" + current_field.id.split('_')[current_field.id.split('_').length - 2] + "_" + current_field.id.split('_')[current_field.id.split('_').length - 1];
                        var destination_id = "destination_to_" + current_field_specifics;
                        var departure_id = "departure_from_" + current_field_specifics;
                        console.log("departure_id: " + departure_id);
                        console.log('destingarion_id: ' + destination_id);
                        if (document.getElementById(departure_id).value === '' || document.getElementById(destination_id).value === ''){
                            mileage_wrong = true;
                        }
                    }
                }
                if(mileage_wrong){
                    what_to_fix += "Every day that you have traveled you must specify where you traveled to and from"
                }
            }


            if (what_to_fix !== 'There are still some things you need to fill out: \n\n'){
                console.log('there is something to fix');
                alert(what_to_fix);
                return false;
            }
            else{
                console.log("there is nothing to fix");
                return true;
            }

        }
    </script>



    <!-- Get and submit chat messages. - Written by Zaawar Ejaz -->
    {% if show_chat and form_is_being_shown_to_approver %}
        <script>
            const url = '{% url 'chat_api' %}';
            const form_id = '{{ form_id }}';
            const user_id = '{{ request.session.user_id }}';
            const form_type = 'TR';
            const csrf_token = '{{ csrf_token }}';
            const chat_approver_url = '{%  url 'get_form_approver_api' %}'
        </script>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.11.0/underscore-min.js" type='text/javascript'></script>
        <script src="http://podio.github.io/jquery-mentions-input/lib/jquery.elastic.js" type='text/javascript'></script>
        <script src='http://podio.github.io/jquery-mentions-input/jquery.mentionsInput.js' type='text/javascript'></script>
        <script src="{% static 'office_app/js/chat.js' %}"></script>

    {% endif %}


</body>

</html>
